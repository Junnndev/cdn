/*! For license information please see bundle.js.LICENSE.txt */
(()=>{var t={146:(t,e,n)=>{"use strict";function r(){var t,e,n="function"==typeof Symbol?Symbol:{},c=n.iterator||"@@iterator",a=n.toStringTag||"@@toStringTag";function i(n,r,c,a){var i=r&&r.prototype instanceof s?r:s,l=Object.create(i.prototype);return o(l,"_invoke",function(n,r,o){var c,a,i,s=0,l=o||[],f=!1,d={p:0,n:0,v:t,a:p,f:p.bind(t,4),d:function(e,n){return c=e,a=0,i=t,d.n=n,u}};function p(n,r){for(a=n,i=r,e=0;!f&&s&&!o&&e<l.length;e++){var o,c=l[e],p=d.p,v=c[2];n>3?(o=v===r)&&(i=c[(a=c[4])?5:(a=3,3)],c[4]=c[5]=t):c[0]<=p&&((o=n<2&&p<c[1])?(a=0,d.v=r,d.n=c[1]):p<v&&(o=n<3||c[0]>r||r>v)&&(c[4]=n,c[5]=r,d.n=v,a=0))}if(o||n>1)return u;throw f=!0,r}return function(o,l,v){if(s>1)throw TypeError("Generator is already running");for(f&&1===l&&p(l,v),a=l,i=v;(e=a<2?t:i)||!f;){c||(a?a<3?(a>1&&(d.n=-1),p(a,i)):d.n=i:d.v=i);try{if(s=2,c){if(a||(o="next"),e=c[o]){if(!(e=e.call(c,i)))throw TypeError("iterator result is not an object");if(!e.done)return e;i=e.value,a<2&&(a=0)}else 1===a&&(e=c.return)&&e.call(c),a<2&&(i=TypeError("The iterator does not provide a '"+o+"' method"),a=1);c=t}else if((e=(f=d.n<0)?i:n.call(r,d))!==u)break}catch(e){c=t,a=1,i=e}finally{s=1}}return{value:e,done:f}}}(n,c,a),!0),l}var u={};function s(){}function l(){}function f(){}e=Object.getPrototypeOf;var d=[][c]?e(e([][c]())):(o(e={},c,function(){return this}),e),p=f.prototype=s.prototype=Object.create(d);function v(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,f):(t.__proto__=f,o(t,a,"GeneratorFunction")),t.prototype=Object.create(p),t}return l.prototype=f,o(p,"constructor",f),o(f,"constructor",l),l.displayName="GeneratorFunction",o(f,a,"GeneratorFunction"),o(p),o(p,a,"Generator"),o(p,c,function(){return this}),o(p,"toString",function(){return"[object Generator]"}),(r=function(){return{w:i,m:v}})()}function o(t,e,n,r){var c=Object.defineProperty;try{c({},"",{})}catch(t){c=0}o=function(t,e,n,r){function a(e,n){o(t,e,function(t){return this._invoke(e,n,t)})}e?c?c(t,e,{value:n,enumerable:!r,configurable:!r,writable:!r}):t[e]=n:(a("next",0),a("throw",1),a("return",2))},o(t,e,n,r)}function c(t,e,n,r,o,c,a){try{var i=t[c](a),u=i.value}catch(t){return void n(t)}i.done?e(u):Promise.resolve(u).then(r,o)}n.r(e),n.d(e,{default:()=>a});const a={config:{commandName:"fbdl"},jnAi:(i=r().m(function t(e){var n,o,c,a,i,u,s;return r().w(function(t){for(;;)switch(t.p=t.n){case 0:if(n=e.addMessage,o=e.addMedia,e.text,c=e.args,a=c.split(" ")[0]){t.n=1;break}return n("No URL provided for Facebook download.","ai"),t.a(2);case 1:return t.p=1,t.n=2,fetch("/fbdl?url=".concat(encodeURIComponent(a)));case 2:if((i=t.v).ok){t.n=3;break}throw new Error("FBDL request failed");case 3:return t.n=4,i.json();case 4:(u=t.v).status&&u.link?o(u.link,"video"):n("Failed to fetch Facebook media.","ai"),t.n=6;break;case 5:t.p=5,s=t.v,console.error("FBDL error:",s),n("Error: ".concat(s.message||"Failed to process Facebook download request."),"ai");case 6:return t.a(2)}},t,null,[[1,5]])}),u=function(){var t=this,e=arguments;return new Promise(function(n,r){var o=i.apply(t,e);function a(t){c(o,n,r,a,u,"next",t)}function u(t){c(o,n,r,a,u,"throw",t)}a(void 0)})},function(t){return u.apply(this,arguments)})};var i,u},225:(t,e,n)=>{"use strict";function r(){var t,e,n="function"==typeof Symbol?Symbol:{},c=n.iterator||"@@iterator",a=n.toStringTag||"@@toStringTag";function i(n,r,c,a){var i=r&&r.prototype instanceof s?r:s,l=Object.create(i.prototype);return o(l,"_invoke",function(n,r,o){var c,a,i,s=0,l=o||[],f=!1,d={p:0,n:0,v:t,a:p,f:p.bind(t,4),d:function(e,n){return c=e,a=0,i=t,d.n=n,u}};function p(n,r){for(a=n,i=r,e=0;!f&&s&&!o&&e<l.length;e++){var o,c=l[e],p=d.p,v=c[2];n>3?(o=v===r)&&(i=c[(a=c[4])?5:(a=3,3)],c[4]=c[5]=t):c[0]<=p&&((o=n<2&&p<c[1])?(a=0,d.v=r,d.n=c[1]):p<v&&(o=n<3||c[0]>r||r>v)&&(c[4]=n,c[5]=r,d.n=v,a=0))}if(o||n>1)return u;throw f=!0,r}return function(o,l,v){if(s>1)throw TypeError("Generator is already running");for(f&&1===l&&p(l,v),a=l,i=v;(e=a<2?t:i)||!f;){c||(a?a<3?(a>1&&(d.n=-1),p(a,i)):d.n=i:d.v=i);try{if(s=2,c){if(a||(o="next"),e=c[o]){if(!(e=e.call(c,i)))throw TypeError("iterator result is not an object");if(!e.done)return e;i=e.value,a<2&&(a=0)}else 1===a&&(e=c.return)&&e.call(c),a<2&&(i=TypeError("The iterator does not provide a '"+o+"' method"),a=1);c=t}else if((e=(f=d.n<0)?i:n.call(r,d))!==u)break}catch(e){c=t,a=1,i=e}finally{s=1}}return{value:e,done:f}}}(n,c,a),!0),l}var u={};function s(){}function l(){}function f(){}e=Object.getPrototypeOf;var d=[][c]?e(e([][c]())):(o(e={},c,function(){return this}),e),p=f.prototype=s.prototype=Object.create(d);function v(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,f):(t.__proto__=f,o(t,a,"GeneratorFunction")),t.prototype=Object.create(p),t}return l.prototype=f,o(p,"constructor",f),o(f,"constructor",l),l.displayName="GeneratorFunction",o(f,a,"GeneratorFunction"),o(p),o(p,a,"Generator"),o(p,c,function(){return this}),o(p,"toString",function(){return"[object Generator]"}),(r=function(){return{w:i,m:v}})()}function o(t,e,n,r){var c=Object.defineProperty;try{c({},"",{})}catch(t){c=0}o=function(t,e,n,r){function a(e,n){o(t,e,function(t){return this._invoke(e,n,t)})}e?c?c(t,e,{value:n,enumerable:!r,configurable:!r,writable:!r}):t[e]=n:(a("next",0),a("throw",1),a("return",2))},o(t,e,n,r)}function c(t,e,n,r,o,c,a){try{var i=t[c](a),u=i.value}catch(t){return void n(t)}i.done?e(u):Promise.resolve(u).then(r,o)}n.r(e),n.d(e,{default:()=>a});const a={config:{commandName:"compile"},jnAi:(i=r().m(function t(e){var n,o,c,a,i,u;return r().w(function(t){for(;;)switch(t.p=t.n){case 0:return n=e.addMessage,e.addMedia,o=e.text,e.args,t.p=1,c=o.split(" ").slice(1).join(" "),t.n=2,fetch("/compile",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({code:c})});case 2:return a=t.v,t.n=3,a.json();case 3:i=t.v,n(i,"ai"),t.n=5;break;case 4:t.p=4,u=t.v,n("Error: ".concat(u.message));case 5:return t.a(2)}},t,null,[[1,4]])}),u=function(){var t=this,e=arguments;return new Promise(function(n,r){var o=i.apply(t,e);function a(t){c(o,n,r,a,u,"next",t)}function u(t){c(o,n,r,a,u,"throw",t)}a(void 0)})},function(t){return u.apply(this,arguments)})};var i,u},253:(t,e,n)=>{var r={"./compile.js":225,"./dice.js":825,"./fbdl.js":146,"./googleimg.js":342,"./imagine.js":524,"./music.js":771,"./quiz.js":899,"./tts.js":781,"./ttt.js":696,"./yt.js":407};function o(t){var e=c(t);return n(e)}function c(t){if(!n.o(r,t)){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}return r[t]}o.keys=function(){return Object.keys(r)},o.resolve=c,t.exports=o,o.id=253},342:(t,e,n)=>{"use strict";function r(){var t,e,n="function"==typeof Symbol?Symbol:{},c=n.iterator||"@@iterator",a=n.toStringTag||"@@toStringTag";function i(n,r,c,a){var i=r&&r.prototype instanceof s?r:s,l=Object.create(i.prototype);return o(l,"_invoke",function(n,r,o){var c,a,i,s=0,l=o||[],f=!1,d={p:0,n:0,v:t,a:p,f:p.bind(t,4),d:function(e,n){return c=e,a=0,i=t,d.n=n,u}};function p(n,r){for(a=n,i=r,e=0;!f&&s&&!o&&e<l.length;e++){var o,c=l[e],p=d.p,v=c[2];n>3?(o=v===r)&&(i=c[(a=c[4])?5:(a=3,3)],c[4]=c[5]=t):c[0]<=p&&((o=n<2&&p<c[1])?(a=0,d.v=r,d.n=c[1]):p<v&&(o=n<3||c[0]>r||r>v)&&(c[4]=n,c[5]=r,d.n=v,a=0))}if(o||n>1)return u;throw f=!0,r}return function(o,l,v){if(s>1)throw TypeError("Generator is already running");for(f&&1===l&&p(l,v),a=l,i=v;(e=a<2?t:i)||!f;){c||(a?a<3?(a>1&&(d.n=-1),p(a,i)):d.n=i:d.v=i);try{if(s=2,c){if(a||(o="next"),e=c[o]){if(!(e=e.call(c,i)))throw TypeError("iterator result is not an object");if(!e.done)return e;i=e.value,a<2&&(a=0)}else 1===a&&(e=c.return)&&e.call(c),a<2&&(i=TypeError("The iterator does not provide a '"+o+"' method"),a=1);c=t}else if((e=(f=d.n<0)?i:n.call(r,d))!==u)break}catch(e){c=t,a=1,i=e}finally{s=1}}return{value:e,done:f}}}(n,c,a),!0),l}var u={};function s(){}function l(){}function f(){}e=Object.getPrototypeOf;var d=[][c]?e(e([][c]())):(o(e={},c,function(){return this}),e),p=f.prototype=s.prototype=Object.create(d);function v(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,f):(t.__proto__=f,o(t,a,"GeneratorFunction")),t.prototype=Object.create(p),t}return l.prototype=f,o(p,"constructor",f),o(f,"constructor",l),l.displayName="GeneratorFunction",o(f,a,"GeneratorFunction"),o(p),o(p,a,"Generator"),o(p,c,function(){return this}),o(p,"toString",function(){return"[object Generator]"}),(r=function(){return{w:i,m:v}})()}function o(t,e,n,r){var c=Object.defineProperty;try{c({},"",{})}catch(t){c=0}o=function(t,e,n,r){function a(e,n){o(t,e,function(t){return this._invoke(e,n,t)})}e?c?c(t,e,{value:n,enumerable:!r,configurable:!r,writable:!r}):t[e]=n:(a("next",0),a("throw",1),a("return",2))},o(t,e,n,r)}function c(t,e,n,r,o,c,a){try{var i=t[c](a),u=i.value}catch(t){return void n(t)}i.done?e(u):Promise.resolve(u).then(r,o)}n.r(e),n.d(e,{default:()=>a});const a={config:{commandName:"googleimg"},jnAi:(i=r().m(function t(e){var n,o,c,a,i,u,s,l;return r().w(function(t){for(;;)switch(t.p=t.n){case 0:if(n=e.addMessage,o=e.addPhoto,c=e.text,e.args,a=c.split(" ").slice(1).join(" ")){t.n=1;break}return n("Please provide a search query","ai"),t.a(2);case 1:return t.p=1,t.n=2,fetch("/googleimg/".concat(encodeURIComponent(a)));case 2:if((i=t.v).ok){t.n=3;break}throw new Error("HTTP error! status: ".concat(i.status));case 3:return t.n=4,i.json();case 4:(u=t.v).link&&(s=Array.isArray(u.link)?u.link:[u.link]).length>0?o(s,"ai"):n("No images found for the query","ai"),t.n=6;break;case 5:t.p=5,l=t.v,console.error("Error fetching images:",l),n("Error: Failed to fetch images. ".concat(l.message),"ai");case 6:return t.a(2)}},t,null,[[1,5]])}),u=function(){var t=this,e=arguments;return new Promise(function(n,r){var o=i.apply(t,e);function a(t){c(o,n,r,a,u,"next",t)}function u(t){c(o,n,r,a,u,"throw",t)}a(void 0)})},function(t){return u.apply(this,arguments)})};var i,u},407:(t,e,n)=>{"use strict";function r(){var t,e,n="function"==typeof Symbol?Symbol:{},c=n.iterator||"@@iterator",a=n.toStringTag||"@@toStringTag";function i(n,r,c,a){var i=r&&r.prototype instanceof s?r:s,l=Object.create(i.prototype);return o(l,"_invoke",function(n,r,o){var c,a,i,s=0,l=o||[],f=!1,d={p:0,n:0,v:t,a:p,f:p.bind(t,4),d:function(e,n){return c=e,a=0,i=t,d.n=n,u}};function p(n,r){for(a=n,i=r,e=0;!f&&s&&!o&&e<l.length;e++){var o,c=l[e],p=d.p,v=c[2];n>3?(o=v===r)&&(i=c[(a=c[4])?5:(a=3,3)],c[4]=c[5]=t):c[0]<=p&&((o=n<2&&p<c[1])?(a=0,d.v=r,d.n=c[1]):p<v&&(o=n<3||c[0]>r||r>v)&&(c[4]=n,c[5]=r,d.n=v,a=0))}if(o||n>1)return u;throw f=!0,r}return function(o,l,v){if(s>1)throw TypeError("Generator is already running");for(f&&1===l&&p(l,v),a=l,i=v;(e=a<2?t:i)||!f;){c||(a?a<3?(a>1&&(d.n=-1),p(a,i)):d.n=i:d.v=i);try{if(s=2,c){if(a||(o="next"),e=c[o]){if(!(e=e.call(c,i)))throw TypeError("iterator result is not an object");if(!e.done)return e;i=e.value,a<2&&(a=0)}else 1===a&&(e=c.return)&&e.call(c),a<2&&(i=TypeError("The iterator does not provide a '"+o+"' method"),a=1);c=t}else if((e=(f=d.n<0)?i:n.call(r,d))!==u)break}catch(e){c=t,a=1,i=e}finally{s=1}}return{value:e,done:f}}}(n,c,a),!0),l}var u={};function s(){}function l(){}function f(){}e=Object.getPrototypeOf;var d=[][c]?e(e([][c]())):(o(e={},c,function(){return this}),e),p=f.prototype=s.prototype=Object.create(d);function v(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,f):(t.__proto__=f,o(t,a,"GeneratorFunction")),t.prototype=Object.create(p),t}return l.prototype=f,o(p,"constructor",f),o(f,"constructor",l),l.displayName="GeneratorFunction",o(f,a,"GeneratorFunction"),o(p),o(p,a,"Generator"),o(p,c,function(){return this}),o(p,"toString",function(){return"[object Generator]"}),(r=function(){return{w:i,m:v}})()}function o(t,e,n,r){var c=Object.defineProperty;try{c({},"",{})}catch(t){c=0}o=function(t,e,n,r){function a(e,n){o(t,e,function(t){return this._invoke(e,n,t)})}e?c?c(t,e,{value:n,enumerable:!r,configurable:!r,writable:!r}):t[e]=n:(a("next",0),a("throw",1),a("return",2))},o(t,e,n,r)}function c(t,e,n,r,o,c,a){try{var i=t[c](a),u=i.value}catch(t){return void n(t)}i.done?e(u):Promise.resolve(u).then(r,o)}n.r(e),n.d(e,{default:()=>a});const a={config:{commandName:"yt"},jnAi:(i=r().m(function t(e){var n,o,c,a,i,u,s,l,f,d;return r().w(function(t){for(;;)switch(t.p=t.n){case 0:if(n=e.addMessage,o=e.addMedia,e.text,c=e.args,a=e.aaа,i=e.loadingMsg,u=c.trim()){t.n=1;break}return n("Add a title.","ai"),t.a(2);case 1:return s=i("fetching ".concat(u)),t.p=2,t.n=3,fetch(a.aаaаа.aаааa,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({title:u,type:"video"})});case 3:if((l=t.v).ok){t.n=4;break}throw new Error("error: backend issue");case 4:return t.n=5,l.json();case 5:f=t.v,s(),f.url?o(f.url,"video"):n("error: no video found.","ai"),t.n=7;break;case 6:t.p=6,d=t.v,console.error(d),s(),n("Error: ".concat(d.message||"error: backend issue"),"ai");case 7:return t.a(2)}},t,null,[[2,6]])}),u=function(){var t=this,e=arguments;return new Promise(function(n,r){var o=i.apply(t,e);function a(t){c(o,n,r,a,u,"next",t)}function u(t){c(o,n,r,a,u,"throw",t)}a(void 0)})},function(t){return u.apply(this,arguments)})};var i,u},524:(t,e,n)=>{"use strict";function r(){var t,e,n="function"==typeof Symbol?Symbol:{},c=n.iterator||"@@iterator",a=n.toStringTag||"@@toStringTag";function i(n,r,c,a){var i=r&&r.prototype instanceof s?r:s,l=Object.create(i.prototype);return o(l,"_invoke",function(n,r,o){var c,a,i,s=0,l=o||[],f=!1,d={p:0,n:0,v:t,a:p,f:p.bind(t,4),d:function(e,n){return c=e,a=0,i=t,d.n=n,u}};function p(n,r){for(a=n,i=r,e=0;!f&&s&&!o&&e<l.length;e++){var o,c=l[e],p=d.p,v=c[2];n>3?(o=v===r)&&(i=c[(a=c[4])?5:(a=3,3)],c[4]=c[5]=t):c[0]<=p&&((o=n<2&&p<c[1])?(a=0,d.v=r,d.n=c[1]):p<v&&(o=n<3||c[0]>r||r>v)&&(c[4]=n,c[5]=r,d.n=v,a=0))}if(o||n>1)return u;throw f=!0,r}return function(o,l,v){if(s>1)throw TypeError("Generator is already running");for(f&&1===l&&p(l,v),a=l,i=v;(e=a<2?t:i)||!f;){c||(a?a<3?(a>1&&(d.n=-1),p(a,i)):d.n=i:d.v=i);try{if(s=2,c){if(a||(o="next"),e=c[o]){if(!(e=e.call(c,i)))throw TypeError("iterator result is not an object");if(!e.done)return e;i=e.value,a<2&&(a=0)}else 1===a&&(e=c.return)&&e.call(c),a<2&&(i=TypeError("The iterator does not provide a '"+o+"' method"),a=1);c=t}else if((e=(f=d.n<0)?i:n.call(r,d))!==u)break}catch(e){c=t,a=1,i=e}finally{s=1}}return{value:e,done:f}}}(n,c,a),!0),l}var u={};function s(){}function l(){}function f(){}e=Object.getPrototypeOf;var d=[][c]?e(e([][c]())):(o(e={},c,function(){return this}),e),p=f.prototype=s.prototype=Object.create(d);function v(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,f):(t.__proto__=f,o(t,a,"GeneratorFunction")),t.prototype=Object.create(p),t}return l.prototype=f,o(p,"constructor",f),o(f,"constructor",l),l.displayName="GeneratorFunction",o(f,a,"GeneratorFunction"),o(p),o(p,a,"Generator"),o(p,c,function(){return this}),o(p,"toString",function(){return"[object Generator]"}),(r=function(){return{w:i,m:v}})()}function o(t,e,n,r){var c=Object.defineProperty;try{c({},"",{})}catch(t){c=0}o=function(t,e,n,r){function a(e,n){o(t,e,function(t){return this._invoke(e,n,t)})}e?c?c(t,e,{value:n,enumerable:!r,configurable:!r,writable:!r}):t[e]=n:(a("next",0),a("throw",1),a("return",2))},o(t,e,n,r)}function c(t,e,n,r,o,c,a){try{var i=t[c](a),u=i.value}catch(t){return void n(t)}i.done?e(u):Promise.resolve(u).then(r,o)}n.r(e),n.d(e,{default:()=>a});const a={config:{commandName:"imagine"},jnAi:(i=r().m(function t(e){var n,o,c,a,i,u,s,l,f,d;return r().w(function(t){for(;;)switch(t.p=t.n){case 0:return n=e.addMessage,o=e.addPhoto,c=e.text,e.args,t.p=1,a=encodeURIComponent(c.split(" ").slice(1).join(" ")),t.n=2,fetch("/commands?name=imagine&args=".concat(a));case 2:if((i=t.v).ok){t.n=3;break}throw new Error("Network response failed: ".concat(i.statusText));case 3:return t.n=4,i.blob();case 4:u=t.v,s=URL.createObjectURL(u),o(s),t.n=6;break;case 5:t.p=5,d=t.v,f=(null===(l=d.response)||void 0===l?void 0:l.data)||d.message||"An error occurred while processing the request",n("Failed to load image: ".concat(f),"ai");case 6:return t.a(2)}},t,null,[[1,5]])}),u=function(){var t=this,e=arguments;return new Promise(function(n,r){var o=i.apply(t,e);function a(t){c(o,n,r,a,u,"next",t)}function u(t){c(o,n,r,a,u,"throw",t)}a(void 0)})},function(t){return u.apply(this,arguments)})};var i,u},696:(t,e,n)=>{"use strict";function r(){var t,e,n="function"==typeof Symbol?Symbol:{},c=n.iterator||"@@iterator",a=n.toStringTag||"@@toStringTag";function i(n,r,c,a){var i=r&&r.prototype instanceof s?r:s,l=Object.create(i.prototype);return o(l,"_invoke",function(n,r,o){var c,a,i,s=0,l=o||[],f=!1,d={p:0,n:0,v:t,a:p,f:p.bind(t,4),d:function(e,n){return c=e,a=0,i=t,d.n=n,u}};function p(n,r){for(a=n,i=r,e=0;!f&&s&&!o&&e<l.length;e++){var o,c=l[e],p=d.p,v=c[2];n>3?(o=v===r)&&(i=c[(a=c[4])?5:(a=3,3)],c[4]=c[5]=t):c[0]<=p&&((o=n<2&&p<c[1])?(a=0,d.v=r,d.n=c[1]):p<v&&(o=n<3||c[0]>r||r>v)&&(c[4]=n,c[5]=r,d.n=v,a=0))}if(o||n>1)return u;throw f=!0,r}return function(o,l,v){if(s>1)throw TypeError("Generator is already running");for(f&&1===l&&p(l,v),a=l,i=v;(e=a<2?t:i)||!f;){c||(a?a<3?(a>1&&(d.n=-1),p(a,i)):d.n=i:d.v=i);try{if(s=2,c){if(a||(o="next"),e=c[o]){if(!(e=e.call(c,i)))throw TypeError("iterator result is not an object");if(!e.done)return e;i=e.value,a<2&&(a=0)}else 1===a&&(e=c.return)&&e.call(c),a<2&&(i=TypeError("The iterator does not provide a '"+o+"' method"),a=1);c=t}else if((e=(f=d.n<0)?i:n.call(r,d))!==u)break}catch(e){c=t,a=1,i=e}finally{s=1}}return{value:e,done:f}}}(n,c,a),!0),l}var u={};function s(){}function l(){}function f(){}e=Object.getPrototypeOf;var d=[][c]?e(e([][c]())):(o(e={},c,function(){return this}),e),p=f.prototype=s.prototype=Object.create(d);function v(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,f):(t.__proto__=f,o(t,a,"GeneratorFunction")),t.prototype=Object.create(p),t}return l.prototype=f,o(p,"constructor",f),o(f,"constructor",l),l.displayName="GeneratorFunction",o(f,a,"GeneratorFunction"),o(p),o(p,a,"Generator"),o(p,c,function(){return this}),o(p,"toString",function(){return"[object Generator]"}),(r=function(){return{w:i,m:v}})()}function o(t,e,n,r){var c=Object.defineProperty;try{c({},"",{})}catch(t){c=0}o=function(t,e,n,r){function a(e,n){o(t,e,function(t){return this._invoke(e,n,t)})}e?c?c(t,e,{value:n,enumerable:!r,configurable:!r,writable:!r}):t[e]=n:(a("next",0),a("throw",1),a("return",2))},o(t,e,n,r)}function c(t,e,n,r,o,c,a){try{var i=t[c](a),u=i.value}catch(t){return void n(t)}i.done?e(u):Promise.resolve(u).then(r,o)}n.r(e),n.d(e,{default:()=>a});const a={config:{commandName:"ttt"},jnAi:(i=r().m(function t(e){var n,o,c,a,i,u,s,l,f,d,p,v,y;return r().w(function(t){for(;;)switch(t.n){case 0:y=function(t,e){var n=t.querySelector("#win-line").getContext("2d");n.strokeStyle="#ffffff",n.lineWidth=5,n.beginPath();var r=[[0,0],[0,1],[0,2],[1,0],[1,1],[1,2],[2,0],[2,1],[2,2]],o=r[e[0]],c=r[e[2]],a=94.5*o[1]+51,i=94.5*o[0]+51,u=94.5*c[1]+51,s=94.5*c[0]+51;n.moveTo(a,i),n.lineTo(u,s),n.stroke()},v=function(t){t.querySelectorAll(".cell").forEach(function(t){t.classList.add("filled"),t.removeEventListener("click",u)})},p=function(t){t.querySelectorAll(".cell");for(var e=0,n=[[0,1,2],[3,4,5],[6,7,8],[0,3,6],[1,4,7],[2,5,8],[0,4,8],[2,4,6]];e<n.length;e++){var r=n[e];if(r.every(function(t){return"X"===a[t]}))return t.querySelector("#message").textContent="You won!",y(t,r),!0;if(r.every(function(t){return"O"===a[t]}))return t.querySelector("#message").textContent="You lose!",y(t,r),!0}return!1},d=function(){for(var t=0,e=[[0,1,2],[3,4,5],[6,7,8],[0,3,6],[1,4,7],[2,5,8],[0,4,8],[2,4,6]];t<e.length;t++){var n=e[t];if(n.every(function(t){return"X"===a[t]}))return"X";if(n.every(function(t){return"O"===a[t]}))return"O"}return a.every(function(t){return""!==t})?"draw":null},f=function(t,e,n){var r=d();if(null!==r)return"O"===r?10-e:"X"===r?e-10:0;if(n){for(var o=-1/0,c=0;c<9;c++)if(""===t[c]){t[c]="O";var a=f(t,e+1,!1);t[c]="",o=Math.max(a,o)}return o}for(var i=1/0,u=0;u<9;u++)if(""===t[u]){t[u]="X";var s=f(t,e+1,!0);t[u]="",i=Math.min(s,i)}return i},l=function(){for(var t,e=-1/0,n=0;n<9;n++)if(""===a[n]){a[n]="O";var r=f(a,0,!1);a[n]="",r>e&&(e=r,t=n)}return t},s=function(t){var e=l(),n=t.querySelectorAll(".cell");n[e].textContent="O",n[e].style.color="black",n[e].classList.add("filled"),a[e]="O",c="X",t.querySelector("#message").textContent="Player's turn (X)",p(t)?v(t):a.every(function(t){return""!==t})&&(t.querySelector("#message").textContent="It's a draw!",v(t))},u=function(t,e){var n=e.querySelectorAll(".cell");n[t].textContent||"X"!==c||(n[t].textContent="X",n[t].style.color="red",n[t].classList.add("filled"),a[t]="X",c="O",e.querySelector("#message").textContent="",p(e)||a.every(function(t){return""!==t})?a.every(function(t){return""!==t})&&(e.querySelector("#message").textContent="It's a draw!",v(e)):setTimeout(function(){return s(e)},500))},i=function(){var t=document.createElement("div");t.className="message ai game-container",t.innerHTML='\n                <div class="message" id="message">Your turn (X)</div>\n                <div class="grid-container">\n                    <div class="grid" id="grid"></div>\n                    <canvas id="win-line" class="win-line"></canvas>\n                </div>\n            ',n.prepend(t),o();var e=document.getElementById("grid"),r=t.querySelector("#win-line");r.width=282,r.height=282;for(var c=function(n){var r=document.createElement("div");r.className="cell",r.style.color="X"===a[n]?"red":"O"===a[n]?"black":"inherit",r.addEventListener("click",function(){return u(n,t)}),e.appendChild(r)},i=0;i<9;i++)c(i)},n=e.messagesDiv,o=e.scrollToBottom,c="X",a=Array(9).fill(""),i();case 1:return t.a(2)}},t)}),u=function(){var t=this,e=arguments;return new Promise(function(n,r){var o=i.apply(t,e);function a(t){c(o,n,r,a,u,"next",t)}function u(t){c(o,n,r,a,u,"throw",t)}a(void 0)})},function(t){return u.apply(this,arguments)})};var i,u},771:(t,e,n)=>{"use strict";function r(){var t,e,n="function"==typeof Symbol?Symbol:{},c=n.iterator||"@@iterator",a=n.toStringTag||"@@toStringTag";function i(n,r,c,a){var i=r&&r.prototype instanceof s?r:s,l=Object.create(i.prototype);return o(l,"_invoke",function(n,r,o){var c,a,i,s=0,l=o||[],f=!1,d={p:0,n:0,v:t,a:p,f:p.bind(t,4),d:function(e,n){return c=e,a=0,i=t,d.n=n,u}};function p(n,r){for(a=n,i=r,e=0;!f&&s&&!o&&e<l.length;e++){var o,c=l[e],p=d.p,v=c[2];n>3?(o=v===r)&&(i=c[(a=c[4])?5:(a=3,3)],c[4]=c[5]=t):c[0]<=p&&((o=n<2&&p<c[1])?(a=0,d.v=r,d.n=c[1]):p<v&&(o=n<3||c[0]>r||r>v)&&(c[4]=n,c[5]=r,d.n=v,a=0))}if(o||n>1)return u;throw f=!0,r}return function(o,l,v){if(s>1)throw TypeError("Generator is already running");for(f&&1===l&&p(l,v),a=l,i=v;(e=a<2?t:i)||!f;){c||(a?a<3?(a>1&&(d.n=-1),p(a,i)):d.n=i:d.v=i);try{if(s=2,c){if(a||(o="next"),e=c[o]){if(!(e=e.call(c,i)))throw TypeError("iterator result is not an object");if(!e.done)return e;i=e.value,a<2&&(a=0)}else 1===a&&(e=c.return)&&e.call(c),a<2&&(i=TypeError("The iterator does not provide a '"+o+"' method"),a=1);c=t}else if((e=(f=d.n<0)?i:n.call(r,d))!==u)break}catch(e){c=t,a=1,i=e}finally{s=1}}return{value:e,done:f}}}(n,c,a),!0),l}var u={};function s(){}function l(){}function f(){}e=Object.getPrototypeOf;var d=[][c]?e(e([][c]())):(o(e={},c,function(){return this}),e),p=f.prototype=s.prototype=Object.create(d);function v(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,f):(t.__proto__=f,o(t,a,"GeneratorFunction")),t.prototype=Object.create(p),t}return l.prototype=f,o(p,"constructor",f),o(f,"constructor",l),l.displayName="GeneratorFunction",o(f,a,"GeneratorFunction"),o(p),o(p,a,"Generator"),o(p,c,function(){return this}),o(p,"toString",function(){return"[object Generator]"}),(r=function(){return{w:i,m:v}})()}function o(t,e,n,r){var c=Object.defineProperty;try{c({},"",{})}catch(t){c=0}o=function(t,e,n,r){function a(e,n){o(t,e,function(t){return this._invoke(e,n,t)})}e?c?c(t,e,{value:n,enumerable:!r,configurable:!r,writable:!r}):t[e]=n:(a("next",0),a("throw",1),a("return",2))},o(t,e,n,r)}function c(t,e,n,r,o,c,a){try{var i=t[c](a),u=i.value}catch(t){return void n(t)}i.done?e(u):Promise.resolve(u).then(r,o)}n.r(e),n.d(e,{default:()=>a});const a={config:{commandName:"music"},jnAi:(i=r().m(function t(e){var n,o,c,a,i,u,s,l,f,d;return r().w(function(t){for(;;)switch(t.p=t.n){case 0:if(n=e.addMessage,o=e.addMedia,e.text,c=e.args,a=e.aaа,i=e.loadingMsg,u=c.trim()){t.n=1;break}return n("Add a title.","ai"),t.a(2);case 1:return s=i("fetching ".concat(u)),t.p=2,t.n=3,fetch(a.aаaаа.aаааa,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({title:u,type:"audio"})});case 3:if((l=t.v).ok){t.n=4;break}throw new Error("error: backend issue");case 4:return t.n=5,l.json();case 5:f=t.v,s(),f.url?o(f.url,"audio"):n("error: no audio found.","ai"),t.n=7;break;case 6:t.p=6,d=t.v,console.error(d),s(),n("Error: ".concat(d.message||"error: backend issue"),"ai");case 7:return t.a(2)}},t,null,[[2,6]])}),u=function(){var t=this,e=arguments;return new Promise(function(n,r){var o=i.apply(t,e);function a(t){c(o,n,r,a,u,"next",t)}function u(t){c(o,n,r,a,u,"throw",t)}a(void 0)})},function(t){return u.apply(this,arguments)})};var i,u},781:(t,e,n)=>{"use strict";function r(){var t,e,n="function"==typeof Symbol?Symbol:{},c=n.iterator||"@@iterator",a=n.toStringTag||"@@toStringTag";function i(n,r,c,a){var i=r&&r.prototype instanceof s?r:s,l=Object.create(i.prototype);return o(l,"_invoke",function(n,r,o){var c,a,i,s=0,l=o||[],f=!1,d={p:0,n:0,v:t,a:p,f:p.bind(t,4),d:function(e,n){return c=e,a=0,i=t,d.n=n,u}};function p(n,r){for(a=n,i=r,e=0;!f&&s&&!o&&e<l.length;e++){var o,c=l[e],p=d.p,v=c[2];n>3?(o=v===r)&&(i=c[(a=c[4])?5:(a=3,3)],c[4]=c[5]=t):c[0]<=p&&((o=n<2&&p<c[1])?(a=0,d.v=r,d.n=c[1]):p<v&&(o=n<3||c[0]>r||r>v)&&(c[4]=n,c[5]=r,d.n=v,a=0))}if(o||n>1)return u;throw f=!0,r}return function(o,l,v){if(s>1)throw TypeError("Generator is already running");for(f&&1===l&&p(l,v),a=l,i=v;(e=a<2?t:i)||!f;){c||(a?a<3?(a>1&&(d.n=-1),p(a,i)):d.n=i:d.v=i);try{if(s=2,c){if(a||(o="next"),e=c[o]){if(!(e=e.call(c,i)))throw TypeError("iterator result is not an object");if(!e.done)return e;i=e.value,a<2&&(a=0)}else 1===a&&(e=c.return)&&e.call(c),a<2&&(i=TypeError("The iterator does not provide a '"+o+"' method"),a=1);c=t}else if((e=(f=d.n<0)?i:n.call(r,d))!==u)break}catch(e){c=t,a=1,i=e}finally{s=1}}return{value:e,done:f}}}(n,c,a),!0),l}var u={};function s(){}function l(){}function f(){}e=Object.getPrototypeOf;var d=[][c]?e(e([][c]())):(o(e={},c,function(){return this}),e),p=f.prototype=s.prototype=Object.create(d);function v(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,f):(t.__proto__=f,o(t,a,"GeneratorFunction")),t.prototype=Object.create(p),t}return l.prototype=f,o(p,"constructor",f),o(f,"constructor",l),l.displayName="GeneratorFunction",o(f,a,"GeneratorFunction"),o(p),o(p,a,"Generator"),o(p,c,function(){return this}),o(p,"toString",function(){return"[object Generator]"}),(r=function(){return{w:i,m:v}})()}function o(t,e,n,r){var c=Object.defineProperty;try{c({},"",{})}catch(t){c=0}o=function(t,e,n,r){function a(e,n){o(t,e,function(t){return this._invoke(e,n,t)})}e?c?c(t,e,{value:n,enumerable:!r,configurable:!r,writable:!r}):t[e]=n:(a("next",0),a("throw",1),a("return",2))},o(t,e,n,r)}function c(t,e,n,r,o,c,a){try{var i=t[c](a),u=i.value}catch(t){return void n(t)}i.done?e(u):Promise.resolve(u).then(r,o)}n.r(e),n.d(e,{default:()=>a});const a={config:{commandName:"tts"},jnAi:(i=r().m(function t(e){var n,o,c,a,i,u;return r().w(function(t){for(;;)switch(t.p=t.n){case 0:if(n=e.addMessage,o=e.addMedia,e.text,c=e.args){t.n=1;break}return n("No text provided for text-to-speech.","ai"),t.a(2);case 1:return t.p=1,t.n=2,fetch("/tts?text=".concat(encodeURIComponent(c)));case 2:if((a=t.v).ok){t.n=3;break}throw new Error("TTS request failed");case 3:return t.n=4,a.json();case 4:(i=t.v).success&&i.data?o(i.data,"audio"):n("Failed to generate text-to-speech audio.","ai"),t.n=6;break;case 5:t.p=5,u=t.v,console.error("TTS error:",u),n("Error: ".concat(u.message||"Failed to process text-to-speech request."),"ai");case 6:return t.a(2)}},t,null,[[1,5]])}),u=function(){var t=this,e=arguments;return new Promise(function(n,r){var o=i.apply(t,e);function a(t){c(o,n,r,a,u,"next",t)}function u(t){c(o,n,r,a,u,"throw",t)}a(void 0)})},function(t){return u.apply(this,arguments)})};var i,u},825:(t,e,n)=>{"use strict";function r(){var t,e,n="function"==typeof Symbol?Symbol:{},c=n.iterator||"@@iterator",a=n.toStringTag||"@@toStringTag";function i(n,r,c,a){var i=r&&r.prototype instanceof s?r:s,l=Object.create(i.prototype);return o(l,"_invoke",function(n,r,o){var c,a,i,s=0,l=o||[],f=!1,d={p:0,n:0,v:t,a:p,f:p.bind(t,4),d:function(e,n){return c=e,a=0,i=t,d.n=n,u}};function p(n,r){for(a=n,i=r,e=0;!f&&s&&!o&&e<l.length;e++){var o,c=l[e],p=d.p,v=c[2];n>3?(o=v===r)&&(i=c[(a=c[4])?5:(a=3,3)],c[4]=c[5]=t):c[0]<=p&&((o=n<2&&p<c[1])?(a=0,d.v=r,d.n=c[1]):p<v&&(o=n<3||c[0]>r||r>v)&&(c[4]=n,c[5]=r,d.n=v,a=0))}if(o||n>1)return u;throw f=!0,r}return function(o,l,v){if(s>1)throw TypeError("Generator is already running");for(f&&1===l&&p(l,v),a=l,i=v;(e=a<2?t:i)||!f;){c||(a?a<3?(a>1&&(d.n=-1),p(a,i)):d.n=i:d.v=i);try{if(s=2,c){if(a||(o="next"),e=c[o]){if(!(e=e.call(c,i)))throw TypeError("iterator result is not an object");if(!e.done)return e;i=e.value,a<2&&(a=0)}else 1===a&&(e=c.return)&&e.call(c),a<2&&(i=TypeError("The iterator does not provide a '"+o+"' method"),a=1);c=t}else if((e=(f=d.n<0)?i:n.call(r,d))!==u)break}catch(e){c=t,a=1,i=e}finally{s=1}}return{value:e,done:f}}}(n,c,a),!0),l}var u={};function s(){}function l(){}function f(){}e=Object.getPrototypeOf;var d=[][c]?e(e([][c]())):(o(e={},c,function(){return this}),e),p=f.prototype=s.prototype=Object.create(d);function v(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,f):(t.__proto__=f,o(t,a,"GeneratorFunction")),t.prototype=Object.create(p),t}return l.prototype=f,o(p,"constructor",f),o(f,"constructor",l),l.displayName="GeneratorFunction",o(f,a,"GeneratorFunction"),o(p),o(p,a,"Generator"),o(p,c,function(){return this}),o(p,"toString",function(){return"[object Generator]"}),(r=function(){return{w:i,m:v}})()}function o(t,e,n,r){var c=Object.defineProperty;try{c({},"",{})}catch(t){c=0}o=function(t,e,n,r){function a(e,n){o(t,e,function(t){return this._invoke(e,n,t)})}e?c?c(t,e,{value:n,enumerable:!r,configurable:!r,writable:!r}):t[e]=n:(a("next",0),a("throw",1),a("return",2))},o(t,e,n,r)}function c(t,e,n,r,o,c,a){try{var i=t[c](a),u=i.value}catch(t){return void n(t)}i.done?e(u):Promise.resolve(u).then(r,o)}n.r(e),n.d(e,{default:()=>a});const a={config:{commandName:"bigsmall"},jnAi:(i=r().m(function t(e){var n,o,c,a,i,u,s,l,f,d,p,v;return r().w(function(t){for(;;)switch(t.n){case 0:f=function(t,e,n,r){e.textContent="Rolling...",l(n,r,function(){var o=u();s(n,o,r);var c,a=o.reduce(function(t,e){return t+e},0);c=3===a||18===a?"Triple! You Lose!":"small"===t&&a>=4&&a<=10?"You Win! Total: ".concat(a," (Small)"):"big"===t&&a>=11&&a<=17?"You Win! Total: ".concat(a," (Big)"):"You Lose! Total: ".concat(a),e.textContent=c})},l=function(t,e,n){var r=0,o=setInterval(function(){var c=u();s(t,c,e),++r>10&&(clearInterval(o),n())},80)},s=function(t,e,n){t.clearRect(0,0,t.canvas.width,t.canvas.height);var r=80*e.length+10*(e.length-1),o=(t.canvas.width-r)/2;e.forEach(function(e,r){var c=o+90*r;n[e]&&t.drawImage(n[e],c,20,80,80)})},u=function(){return[1,2,3].map(function(){return Math.floor(6*Math.random())+1})},i=function(t){for(var e=0,n=[],r=function(r){var o=new Image;o.src="/game/dice/".concat(r,".png"),o.onload=function(){n[r]=o,6===++e&&t(n)},o.onerror=function(){console.error("Failed to load dice image ".concat(r,".png")),6===++e&&t(n)}},o=1;o<=6;o++)r(o)},a=function(){var t=document.createElement("div");return t.className="message ai game-container",t.innerHTML='\n        <div class="text-center font-bold text-white mb-2">🎲 Big or Small Game</div>\n        <canvas id="diceCanvas" width="300" height="120" class="mx-auto mb-4 rounded"></canvas>\n        <div class="flex justify-center gap-4 mb-3">\n          <button class="guess-btn px-4 py-1 bg-blue-500 text-white rounded hover:bg-blue-600" data-choice="small">Small (4-10)</button>\n          <button class="guess-btn px-4 py-1 bg-green-500 text-white rounded hover:bg-green-600" data-choice="big">Big (11-17)</button>\n        </div>\n        <div id="result" class="text-center font-semibold text-white"></div>\n      ',t},n=e.messagesDiv,o=e.scrollToBottom,c=null,c=a(),n.prepend(c),d=c.querySelector("#diceCanvas"),p=c.querySelector("#result"),v=d.getContext("2d"),i(function(t){s(v,[3,3,3],t),c.querySelectorAll(".guess-btn").forEach(function(e){e.addEventListener("click",function(){f(e.dataset.choice,p,v,t)})}),o()});case 1:return t.a(2)}},t)}),u=function(){var t=this,e=arguments;return new Promise(function(n,r){var o=i.apply(t,e);function a(t){c(o,n,r,a,u,"next",t)}function u(t){c(o,n,r,a,u,"throw",t)}a(void 0)})},function(t){return u.apply(this,arguments)})};var i,u},899:(t,e,n)=>{"use strict";function r(){var t,e,n="function"==typeof Symbol?Symbol:{},c=n.iterator||"@@iterator",a=n.toStringTag||"@@toStringTag";function i(n,r,c,a){var i=r&&r.prototype instanceof s?r:s,l=Object.create(i.prototype);return o(l,"_invoke",function(n,r,o){var c,a,i,s=0,l=o||[],f=!1,d={p:0,n:0,v:t,a:p,f:p.bind(t,4),d:function(e,n){return c=e,a=0,i=t,d.n=n,u}};function p(n,r){for(a=n,i=r,e=0;!f&&s&&!o&&e<l.length;e++){var o,c=l[e],p=d.p,v=c[2];n>3?(o=v===r)&&(i=c[(a=c[4])?5:(a=3,3)],c[4]=c[5]=t):c[0]<=p&&((o=n<2&&p<c[1])?(a=0,d.v=r,d.n=c[1]):p<v&&(o=n<3||c[0]>r||r>v)&&(c[4]=n,c[5]=r,d.n=v,a=0))}if(o||n>1)return u;throw f=!0,r}return function(o,l,v){if(s>1)throw TypeError("Generator is already running");for(f&&1===l&&p(l,v),a=l,i=v;(e=a<2?t:i)||!f;){c||(a?a<3?(a>1&&(d.n=-1),p(a,i)):d.n=i:d.v=i);try{if(s=2,c){if(a||(o="next"),e=c[o]){if(!(e=e.call(c,i)))throw TypeError("iterator result is not an object");if(!e.done)return e;i=e.value,a<2&&(a=0)}else 1===a&&(e=c.return)&&e.call(c),a<2&&(i=TypeError("The iterator does not provide a '"+o+"' method"),a=1);c=t}else if((e=(f=d.n<0)?i:n.call(r,d))!==u)break}catch(e){c=t,a=1,i=e}finally{s=1}}return{value:e,done:f}}}(n,c,a),!0),l}var u={};function s(){}function l(){}function f(){}e=Object.getPrototypeOf;var d=[][c]?e(e([][c]())):(o(e={},c,function(){return this}),e),p=f.prototype=s.prototype=Object.create(d);function v(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,f):(t.__proto__=f,o(t,a,"GeneratorFunction")),t.prototype=Object.create(p),t}return l.prototype=f,o(p,"constructor",f),o(f,"constructor",l),l.displayName="GeneratorFunction",o(f,a,"GeneratorFunction"),o(p),o(p,a,"Generator"),o(p,c,function(){return this}),o(p,"toString",function(){return"[object Generator]"}),(r=function(){return{w:i,m:v}})()}function o(t,e,n,r){var c=Object.defineProperty;try{c({},"",{})}catch(t){c=0}o=function(t,e,n,r){function a(e,n){o(t,e,function(t){return this._invoke(e,n,t)})}e?c?c(t,e,{value:n,enumerable:!r,configurable:!r,writable:!r}):t[e]=n:(a("next",0),a("throw",1),a("return",2))},o(t,e,n,r)}function c(t,e,n,r,o,c,a){try{var i=t[c](a),u=i.value}catch(t){return void n(t)}i.done?e(u):Promise.resolve(u).then(r,o)}function a(t){return function(){var e=this,n=arguments;return new Promise(function(r,o){var a=t.apply(e,n);function i(t){c(a,r,o,i,u,"next",t)}function u(t){c(a,r,o,i,u,"throw",t)}i(void 0)})}}n.r(e),n.d(e,{default:()=>i});const i={config:{commandName:"quiz"},jnAi:(u=a(r().m(function t(e){var n,o,c,i,u,s,l,f;return r().w(function(t){for(;;)switch(t.n){case 0:f=function(t,e,n,r,o){var a=t.textContent.trim().split(":")[0],i=c.querySelectorAll(".quiz-option:not(.control-option)");i.forEach(function(t){return t.classList.add("disabled")}),a===e?(t.classList.add("correct"),n.textContent="CORRECT ANSWER!",n.style.color="#48bb78"):(t.classList.add("wrong"),n.textContent="WRONG ANSWER!",n.style.color="#e53e3e",i.forEach(function(t){t.textContent.trim().startsWith(e+":")&&t.classList.add("correct")})),r.style.display="block",r.onclick=function(){i.forEach(function(t){t.classList.remove("disabled","correct","wrong")}),s(o)}},l=function(){return(l=a(r().m(function t(e){var a,s,l,d,p,v,y,m,h,g,b,w,j,O;return r().w(function(t){for(;;)switch(t.p=t.n){case 0:return t.p=0,c||(c=i(),n.prepend(c)),a=c.querySelector(".quiz-question"),s=c.querySelector(".quiz-options"),l=c.querySelector(".quiz-feedback"),d=c.querySelector(".quiz-controls"),p=c.querySelector(".next-option"),v=c.querySelector(".choose-category"),t.n=1,fetch("/quiz/".concat(e));case 1:if((y=t.v).ok){t.n=2;break}throw new Error("Failed to fetch quiz");case 2:return t.n=3,y.json();case 3:(m=t.v).success&&(h=m.data,g=h.question,b=h.options,w=h.answer,a.textContent=g,s.innerHTML="",l.textContent="",d.style.display="flex",p.style.display="none",b.forEach(function(t){var n=document.createElement("div");n.className="quiz-option",n.textContent=t,n.addEventListener("click",function(){return f(n,w,l,p,e)}),s.appendChild(n)}),v.onclick=u),t.n=5;break;case 4:t.p=4,O=t.v,console.error("Error fetching quiz:",O),(j=document.createElement("div")).className="message ai",j.textContent="Failed to load quiz. Please try again.",n.prepend(j);case 5:o();case 6:return t.a(2)}},t,null,[[0,4]])}))).apply(this,arguments)},s=function(t){return l.apply(this,arguments)},u=function(){c||(c=i(),n.prepend(c));var t=c.querySelector(".quiz-question"),e=c.querySelector(".quiz-options"),r=c.querySelector(".quiz-feedback"),a=c.querySelector(".quiz-controls");t.textContent="Please choose a Category to start",e.innerHTML="",r.textContent="",a.style.display="none";for(var u=["math","english","general","physics","science","biology","chemistry","anime","filipino","history","geography"],l=0;l<u.length;l+=3){var f=document.createElement("div");f.className="category-row";for(var d=function(t){var e=document.createElement("div");e.className="quiz-option category-option",e.textContent=u[t],e.addEventListener("click",function(){s(u[t])}),f.appendChild(e)},p=l;p<l+3&&p<u.length;p++)d(p);e.appendChild(f)}o()},i=function(){var t=document.createElement("div");return t.className="message ai quiz-container",t.innerHTML='\n                <div class="quiz-question"></div>\n                <div class="quiz-options"></div>\n                <div class="quiz-feedback"></div>\n                <div class="quiz-controls">\n                    <div class="quiz-option control-option choose-category">Choose another category</div>\n                    <div class="quiz-option control-option next-option" style="display: none;">Next</div>\n                </div>\n            ',t},n=e.messagesDiv,o=e.scrollToBottom,c=null,u();case 1:return t.a(2)}},t)})),function(t){return u.apply(this,arguments)})};var u}},e={};function n(r){var o=e[r];if(void 0!==o)return o.exports;var c=e[r]={exports:{}};return t[r](c,c.exports,n),c.exports}n.d=(t,e)=>{for(var r in e)n.o(e,r)&&!n.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:e[r]})},n.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),n.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},(()=>{"use strict";function t(e){return t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},t(e)}function e(e,n,r){return(n=function(e){var n=function(e){if("object"!=t(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=t(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==t(n)?n:n+""}(n))in e?Object.defineProperty(e,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[n]=r,e}function r(t){return function(t){if(Array.isArray(t))return c(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||o(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(t,e){if(t){if("string"==typeof t)return c(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?c(t,e):void 0}}function c(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}var a,i,u,s,l,f="5c75303035355c75303033335c75303035325c75303037395c75303036315c75303035375c75303033355c75303036655c75303034635c75303036645c75303035615c75303037395c75303036325c75303033325c75303033315c75303034345c75303036315c75303034375c75303034365c75303037395c75303035315c75303033325c75303033395c75303036625c75303035615c75303035335c75303036375c75303037385c75303034645c75303034345c75303035355c75303037335c75303034665c75303035345c75303036335c75303037335c75303034655c75303034345c75303035355c75303037335c75303034645c75303035345c75303034355c75303037375c75303034635c75303034345c75303034355c75303037375c75303034655c75303036395c75303037375c75303033305c75303034655c75303037395c75303037375c75303037385c75303034645c75303034345c75303035355c75303037335c75303034645c75303035345c75303034355c75303037395c75303034635c75303034345c75303036625c75303033335c75303034635c75303034345c75303035315c75303033335c75303034635c75303034345c75303035315c75303033355c75303034635c75303034345c75303034355c75303037385c75303034665c75303034335c75303037375c75303033305c75303034655c75303037395c75303036625c7530303364сс5c75303035355c75303033335c75303035325c75303037395c75303036315c75303035375c75303033355c75303036655c75303034635c75303036645c75303035615c75303037395c75303036325c75303033325c75303033315c75303034345c75303036315c75303034375c75303034365c75303037395c75303035315c75303033325c75303033395c75303036625c75303035615c75303035335c75303036375c75303033325c75303034645c75303035335c75303037375c75303037385c75303034645c75303034345c75303036375c75303037335c75303034645c75303035345c75303034355c75303033305c75303034635c75303034345c75303034355c75303037385c75303034655c75303037395c75303037375c75303033325c75303034645c75303037395c75303037375c75303037385c75303034645c75303034345c75303036375c75303037335c75303034645c75303035345c75303034315c75303037375c75303034635c75303034345c75303036625c75303033345c75303034635c75303034345c75303034355c75303037375c75303034645c75303036395c75303037375c75303033305c75303034655c75303037395c75303036625c7530303364сс5c75303035355c75303033335c75303035325c75303037395c75303036315c75303035375c75303033355c75303036655c75303034635c75303036645c75303035615c75303037395c75303036325c75303033325c75303033315c75303034345c75303036315c75303034375c75303034365c75303037395c75303035315c75303033325c75303033395c75303036625c75303035615c75303035335c75303036375c75303037385c75303034645c75303034345c75303035315c75303037335c75303034645c75303035345c75303034355c75303033325c75303034635c75303034345c75303034355c75303037385c75303034655c75303037395c75303037375c75303033355c75303034655c75303037395c75303037375c75303033305c75303034655c75303035335c75303037375c75303037385c75303034645c75303034345c75303036335c75303037335c75303034665c75303035345c75303036625c75303037335c75303034645c75303035345c75303034315c75303037385c75303034635c75303034345c75303034355c75303037375c75303034655c75303034335c75303037375c75303033355c75303034665c75303035335c75303037375c75303033305c75303034655c75303037395c75303036625c7530303364сс5c75303035355c75303033335c75303035325c75303037395c75303036315c75303035375c75303033355c75303036655c75303034635c75303036645c75303035615c75303037395c75303036325c75303033325c75303033315c75303034345c75303036315c75303034375c75303034365c75303037395c75303035315c75303033325c75303033395c75303036625c75303035615c75303035335c75303036375c75303037385c75303034645c75303035345c75303035395c75303037335c75303034645c75303035345c75303034395c75303037385c75303034635c75303034345c75303035315c75303033335c75303034635c75303034345c75303034355c75303037375c75303034655c75303035335c75303037375c75303037385c75303034645c75303035345c75303034395c75303037335c75303034665c75303035345c75303036335c75303037335c75303034655c75303034345c75303036335c75303037335c75303034655c75303034345c75303036625c75303037335c75303034645c75303035345c75303034355c75303033345c75303034635c75303034345c75303035315c75303033335c75303034625c75303035315c75303033645c7530303364".split("сс").map(function(t){for(var e="",n=0;n<t.length;n+=2){var r=t.slice(n,n+2);e+=String.fromCharCode(parseInt(r,16))}return e}),d=(a=new Set,i="aaааа".split("").sort(),u=Array(i.length).fill(!1),(s=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];if(t.length!==i.length)for(var e=0;e<i.length;e++)u[e]||e>0&&i[e]===i[e-1]&&!u[e-1]||(u[e]=!0,t.push(i[e]),s(t),t.pop(),u[e]=!1);else a.add(t.join(""))})(),r(a)),p=Object.fromEntries(Object.entries(e(e({},d[1],f.map(function(t){return(e=t,n=e.replace(/\\u([\dA-Fa-f]{4})/g,function(t,e){return String.fromCharCode(parseInt(e,16))}),o=atob(n).match(/String\.fromCharCode\((.*)\)/)[1].split(",").map(Number),String.fromCharCode.apply(String,r(o)).split("").reverse().join("")).replace(/^\\/,"");var e,n,o})),d[0],["one","two","three","four"])).map(function(t){var e=function(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,o,c,a,i=[],u=!0,s=!1;try{if(c=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=c.call(n)).done)&&(i.push(r.value),i.length!==e);u=!0);}catch(t){s=!0,o=t}finally{try{if(!u&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(s)throw o}}return i}}(t,e)||o(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(t,2),n=e[0],r=e[1];return[n,new Proxy({},{get:function(t,e){var n=d.indexOf(e);return n>-1?r[n]:void 0}})]})),v={auth:{secret:(l=atob("ODcgODcgNTcgNDkgNzQgNTEgNzQgMTA4IDg4IDUwIDkwIDQ5IDg5IDUwIDExNiAxMTIgOTggMTA5IDEwMCAxMDIgOTcgODcgNTMgMTIyIDg5IDg3IDUzIDEwOCA4OCA1MCA4MiAxMDggODkgNTEgNzQgNTMgOTkgNzIgODIgMTEyIDk4IDEwOSAxMDAgMTAyIDEwMCA3MSAxMDQgMTEyIDk5IDExOSA2MSA2MQ==").split(" ").map(function(t){return String.fromCharCode(Number(t))}).join(""),atob(l))}};function y(){var t,e,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function c(n,r,o,c){var u=r&&r.prototype instanceof i?r:i,s=Object.create(u.prototype);return m(s,"_invoke",function(n,r,o){var c,i,u,s=0,l=o||[],f=!1,d={p:0,n:0,v:t,a:p,f:p.bind(t,4),d:function(e,n){return c=e,i=0,u=t,d.n=n,a}};function p(n,r){for(i=n,u=r,e=0;!f&&s&&!o&&e<l.length;e++){var o,c=l[e],p=d.p,v=c[2];n>3?(o=v===r)&&(u=c[(i=c[4])?5:(i=3,3)],c[4]=c[5]=t):c[0]<=p&&((o=n<2&&p<c[1])?(i=0,d.v=r,d.n=c[1]):p<v&&(o=n<3||c[0]>r||r>v)&&(c[4]=n,c[5]=r,d.n=v,i=0))}if(o||n>1)return a;throw f=!0,r}return function(o,l,v){if(s>1)throw TypeError("Generator is already running");for(f&&1===l&&p(l,v),i=l,u=v;(e=i<2?t:u)||!f;){c||(i?i<3?(i>1&&(d.n=-1),p(i,u)):d.n=u:d.v=u);try{if(s=2,c){if(i||(o="next"),e=c[o]){if(!(e=e.call(c,u)))throw TypeError("iterator result is not an object");if(!e.done)return e;u=e.value,i<2&&(i=0)}else 1===i&&(e=c.return)&&e.call(c),i<2&&(u=TypeError("The iterator does not provide a '"+o+"' method"),i=1);c=t}else if((e=(f=d.n<0)?u:n.call(r,d))!==a)break}catch(e){c=t,i=1,u=e}finally{s=1}}return{value:e,done:f}}}(n,o,c),!0),s}var a={};function i(){}function u(){}function s(){}e=Object.getPrototypeOf;var l=[][r]?e(e([][r]())):(m(e={},r,function(){return this}),e),f=s.prototype=i.prototype=Object.create(l);function d(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,s):(t.__proto__=s,m(t,o,"GeneratorFunction")),t.prototype=Object.create(f),t}return u.prototype=s,m(f,"constructor",s),m(s,"constructor",u),u.displayName="GeneratorFunction",m(s,o,"GeneratorFunction"),m(f),m(f,o,"Generator"),m(f,r,function(){return this}),m(f,"toString",function(){return"[object Generator]"}),(y=function(){return{w:c,m:d}})()}function m(t,e,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(t){o=0}m=function(t,e,n,r){function c(e,n){m(t,e,function(t){return this._invoke(e,n,t)})}e?o?o(t,e,{value:n,enumerable:!r,configurable:!r,writable:!r}):t[e]=n:(c("next",0),c("throw",1),c("return",2))},m(t,e,n,r)}function h(t,e,n,r,o,c,a){try{var i=t[c](a),u=i.value}catch(t){return void n(t)}i.done?e(u):Promise.resolve(u).then(r,o)}function g(){return b.apply(this,arguments)}function b(){var t;return t=y().m(function t(){var e,n,r;return y().w(function(t){for(;;)switch(t.n){case 0:e=document.getElementById("menu-toggle"),n=document.getElementById("sidebar"),r=document.getElementById("close-btn"),e.addEventListener("click",function(){n.classList.add("open"),e.classList.add("hidden")}),r.addEventListener("click",function(){n.classList.remove("open"),e.classList.remove("hidden")});case 1:return t.a(2)}},t)}),b=function(){var e=this,n=arguments;return new Promise(function(r,o){var c=t.apply(e,n);function a(t){h(c,r,o,a,i,"next",t)}function i(t){h(c,r,o,a,i,"throw",t)}a(void 0)})},b.apply(this,arguments)}function w(){var t,e,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function c(n,r,o,c){var u=r&&r.prototype instanceof i?r:i,s=Object.create(u.prototype);return j(s,"_invoke",function(n,r,o){var c,i,u,s=0,l=o||[],f=!1,d={p:0,n:0,v:t,a:p,f:p.bind(t,4),d:function(e,n){return c=e,i=0,u=t,d.n=n,a}};function p(n,r){for(i=n,u=r,e=0;!f&&s&&!o&&e<l.length;e++){var o,c=l[e],p=d.p,v=c[2];n>3?(o=v===r)&&(u=c[(i=c[4])?5:(i=3,3)],c[4]=c[5]=t):c[0]<=p&&((o=n<2&&p<c[1])?(i=0,d.v=r,d.n=c[1]):p<v&&(o=n<3||c[0]>r||r>v)&&(c[4]=n,c[5]=r,d.n=v,i=0))}if(o||n>1)return a;throw f=!0,r}return function(o,l,v){if(s>1)throw TypeError("Generator is already running");for(f&&1===l&&p(l,v),i=l,u=v;(e=i<2?t:u)||!f;){c||(i?i<3?(i>1&&(d.n=-1),p(i,u)):d.n=u:d.v=u);try{if(s=2,c){if(i||(o="next"),e=c[o]){if(!(e=e.call(c,u)))throw TypeError("iterator result is not an object");if(!e.done)return e;u=e.value,i<2&&(i=0)}else 1===i&&(e=c.return)&&e.call(c),i<2&&(u=TypeError("The iterator does not provide a '"+o+"' method"),i=1);c=t}else if((e=(f=d.n<0)?u:n.call(r,d))!==a)break}catch(e){c=t,i=1,u=e}finally{s=1}}return{value:e,done:f}}}(n,o,c),!0),s}var a={};function i(){}function u(){}function s(){}e=Object.getPrototypeOf;var l=[][r]?e(e([][r]())):(j(e={},r,function(){return this}),e),f=s.prototype=i.prototype=Object.create(l);function d(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,s):(t.__proto__=s,j(t,o,"GeneratorFunction")),t.prototype=Object.create(f),t}return u.prototype=s,j(f,"constructor",s),j(s,"constructor",u),u.displayName="GeneratorFunction",j(s,o,"GeneratorFunction"),j(f),j(f,o,"Generator"),j(f,r,function(){return this}),j(f,"toString",function(){return"[object Generator]"}),(w=function(){return{w:c,m:d}})()}function j(t,e,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(t){o=0}j=function(t,e,n,r){function c(e,n){j(t,e,function(t){return this._invoke(e,n,t)})}e?o?o(t,e,{value:n,enumerable:!r,configurable:!r,writable:!r}):t[e]=n:(c("next",0),c("throw",1),c("return",2))},j(t,e,n,r)}function O(t,e,n,r,o,c,a){try{var i=t[c](a),u=i.value}catch(t){return void n(t)}i.done?e(u):Promise.resolve(u).then(r,o)}function E(t){return T.apply(this,arguments)}function T(){var t;return t=w().m(function t(e){var n,r,o,c,a,i,u,s,l;return w().w(function(t){for(;;)switch(t.n){case 0:return n=e.text,r=e.assistant,o=e.userId,c=e.users,a=e.fuck,i=e.aaа,u=e.upImg,t.n=1,fetch(i.aаaаа.aaааа,{method:"POST",headers:{"Content-Type":"application/json","jn-api-key":a.auth.secret},body:JSON.stringify({prompt:n,system:r.getCurrentAssistant()||"helpful",id:o,user:c,language:r.getCurrentLanguage()||"english",data:u.upImg||null})});case 1:return s=t.v,t.n=2,s.json();case 2:if(l=t.v,s.ok){t.n=3;break}throw new Error(l.error||"Unknown error");case 3:return t.a(2,l)}},t)}),T=function(){var e=this,n=arguments;return new Promise(function(r,o){var c=t.apply(e,n);function a(t){O(c,r,o,a,i,"next",t)}function i(t){O(c,r,o,a,i,"throw",t)}a(void 0)})},T.apply(this,arguments)}function x(){var t,e,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function c(n,r,o,c){var u=r&&r.prototype instanceof i?r:i,s=Object.create(u.prototype);return S(s,"_invoke",function(n,r,o){var c,i,u,s=0,l=o||[],f=!1,d={p:0,n:0,v:t,a:p,f:p.bind(t,4),d:function(e,n){return c=e,i=0,u=t,d.n=n,a}};function p(n,r){for(i=n,u=r,e=0;!f&&s&&!o&&e<l.length;e++){var o,c=l[e],p=d.p,v=c[2];n>3?(o=v===r)&&(u=c[(i=c[4])?5:(i=3,3)],c[4]=c[5]=t):c[0]<=p&&((o=n<2&&p<c[1])?(i=0,d.v=r,d.n=c[1]):p<v&&(o=n<3||c[0]>r||r>v)&&(c[4]=n,c[5]=r,d.n=v,i=0))}if(o||n>1)return a;throw f=!0,r}return function(o,l,v){if(s>1)throw TypeError("Generator is already running");for(f&&1===l&&p(l,v),i=l,u=v;(e=i<2?t:u)||!f;){c||(i?i<3?(i>1&&(d.n=-1),p(i,u)):d.n=u:d.v=u);try{if(s=2,c){if(i||(o="next"),e=c[o]){if(!(e=e.call(c,u)))throw TypeError("iterator result is not an object");if(!e.done)return e;u=e.value,i<2&&(i=0)}else 1===i&&(e=c.return)&&e.call(c),i<2&&(u=TypeError("The iterator does not provide a '"+o+"' method"),i=1);c=t}else if((e=(f=d.n<0)?u:n.call(r,d))!==a)break}catch(e){c=t,i=1,u=e}finally{s=1}}return{value:e,done:f}}}(n,o,c),!0),s}var a={};function i(){}function u(){}function s(){}e=Object.getPrototypeOf;var l=[][r]?e(e([][r]())):(S(e={},r,function(){return this}),e),f=s.prototype=i.prototype=Object.create(l);function d(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,s):(t.__proto__=s,S(t,o,"GeneratorFunction")),t.prototype=Object.create(f),t}return u.prototype=s,S(f,"constructor",s),S(s,"constructor",u),u.displayName="GeneratorFunction",S(s,o,"GeneratorFunction"),S(f),S(f,o,"Generator"),S(f,r,function(){return this}),S(f,"toString",function(){return"[object Generator]"}),(x=function(){return{w:c,m:d}})()}function S(t,e,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(t){o=0}S=function(t,e,n,r){function c(e,n){S(t,e,function(t){return this._invoke(e,n,t)})}e?o?o(t,e,{value:n,enumerable:!r,configurable:!r,writable:!r}):t[e]=n:(c("next",0),c("throw",1),c("return",2))},S(t,e,n,r)}function k(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,o,c,a,i=[],u=!0,s=!1;try{if(c=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=c.call(n)).done)&&(i.push(r.value),i.length!==e);u=!0);}catch(t){s=!0,o=t}finally{try{if(!u&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(s)throw o}}return i}}(t,e)||function(t,e){if(t){if("string"==typeof t)return P(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?P(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function P(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function C(t,e,n,r,o,c,a){try{var i=t[c](a),u=i.value}catch(t){return void n(t)}i.done?e(u):Promise.resolve(u).then(r,o)}function _(t){return G.apply(this,arguments)}function G(){var t;return t=x().m(function t(e){var n,r,o,c,a,i,u,s,l,f,d,p,v,y,m,h,g,b,w,j,O,T,S,P,C,_,G;return x().w(function(t){for(;;)switch(t.p=t.n){case 0:if(n=e.text,r=e.form,e.input,o=e.addMessage,c=e.addMedia,a=e.addPhoto,i=e.messagesDiv,u=e.scrollToBottom,s=e.assistant,l=e.commandss,f=e.userId,d=e.users,p=e.fuck,v=e.aaа,y=e.upImg,m=e.commandSuggestions,h=e.removeThumbnail,g=e.loadingMsg,n&&!r.classList.contains("submitting")){t.n=1;break}return t.a(2);case 1:if(r.classList.add("submitting"),b=y,o(n,"user",y.upImg||null),m.style.display="none",t.p=2,!(w=n.match(/^\/(\w+)(?:\s(.+))?$/))){t.n=5;break}if(j=k(w,3),O=j[1],T=j[2],!(S=l[O])){t.n=4;break}return t.n=3,S({addMessage:o,addMedia:c,addPhoto:a,text:n,args:T,messagesDiv:i,scrollToBottom:u,aaа:v,loadingMsg:g});case 3:return t.a(2);case 4:throw new Error("Unknown command: ".concat(O));case 5:return(P=document.createElement("div")).className="message ai loading",P.innerHTML="AI is typing <span>.</span><span>.</span><span>.</span>",i.prepend(P),u(),t.n=6,E({text:n,assistant:s,userId:f,users:d,fuck:p,aaа:v,upImg:b});case 6:C=t.v,i.removeChild(P),h(),C.result&&o(C.result,"ai"),C.link&&(_=Array.isArray(C.link)?C.link:[C.link]).length>0&&a(_,"ai"),t.n=8;break;case 7:t.p=7,G=t.v,console.error("Error:",G),i.removeChild(loading),h(),o(G.message,"ai");case 8:return t.p=8,r.classList.remove("submitting"),u(),t.f(8);case 9:return t.a(2)}},t,null,[[2,7,8,9]])}),G=function(){var e=this,n=arguments;return new Promise(function(r,o){var c=t.apply(e,n);function a(t){C(c,r,o,a,i,"next",t)}function i(t){C(c,r,o,a,i,"throw",t)}a(void 0)})},G.apply(this,arguments)}function L(){var t,e,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function c(n,r,o,c){var u=r&&r.prototype instanceof i?r:i,s=Object.create(u.prototype);return I(s,"_invoke",function(n,r,o){var c,i,u,s=0,l=o||[],f=!1,d={p:0,n:0,v:t,a:p,f:p.bind(t,4),d:function(e,n){return c=e,i=0,u=t,d.n=n,a}};function p(n,r){for(i=n,u=r,e=0;!f&&s&&!o&&e<l.length;e++){var o,c=l[e],p=d.p,v=c[2];n>3?(o=v===r)&&(u=c[(i=c[4])?5:(i=3,3)],c[4]=c[5]=t):c[0]<=p&&((o=n<2&&p<c[1])?(i=0,d.v=r,d.n=c[1]):p<v&&(o=n<3||c[0]>r||r>v)&&(c[4]=n,c[5]=r,d.n=v,i=0))}if(o||n>1)return a;throw f=!0,r}return function(o,l,v){if(s>1)throw TypeError("Generator is already running");for(f&&1===l&&p(l,v),i=l,u=v;(e=i<2?t:u)||!f;){c||(i?i<3?(i>1&&(d.n=-1),p(i,u)):d.n=u:d.v=u);try{if(s=2,c){if(i||(o="next"),e=c[o]){if(!(e=e.call(c,u)))throw TypeError("iterator result is not an object");if(!e.done)return e;u=e.value,i<2&&(i=0)}else 1===i&&(e=c.return)&&e.call(c),i<2&&(u=TypeError("The iterator does not provide a '"+o+"' method"),i=1);c=t}else if((e=(f=d.n<0)?u:n.call(r,d))!==a)break}catch(e){c=t,i=1,u=e}finally{s=1}}return{value:e,done:f}}}(n,o,c),!0),s}var a={};function i(){}function u(){}function s(){}e=Object.getPrototypeOf;var l=[][r]?e(e([][r]())):(I(e={},r,function(){return this}),e),f=s.prototype=i.prototype=Object.create(l);function d(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,s):(t.__proto__=s,I(t,o,"GeneratorFunction")),t.prototype=Object.create(f),t}return u.prototype=s,I(f,"constructor",s),I(s,"constructor",u),u.displayName="GeneratorFunction",I(s,o,"GeneratorFunction"),I(f),I(f,o,"Generator"),I(f,r,function(){return this}),I(f,"toString",function(){return"[object Generator]"}),(L=function(){return{w:c,m:d}})()}function I(t,e,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(t){o=0}I=function(t,e,n,r){function c(e,n){I(t,e,function(t){return this._invoke(e,n,t)})}e?o?o(t,e,{value:n,enumerable:!r,configurable:!r,writable:!r}):t[e]=n:(c("next",0),c("throw",1),c("return",2))},I(t,e,n,r)}function A(t,e,n,r,o,c,a){try{var i=t[c](a),u=i.value}catch(t){return void n(t)}i.done?e(u):Promise.resolve(u).then(r,o)}function N(){return F.apply(this,arguments)}function F(){var t;return t=L().m(function t(){var e;return L().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,fetch("/commandlist");case 1:return e=t.v,t.n=2,e.json();case 2:return t.a(2,t.v)}},t)}),F=function(){var e=this,n=arguments;return new Promise(function(r,o){var c=t.apply(e,n);function a(t){A(c,r,o,a,i,"next",t)}function i(t){A(c,r,o,a,i,"throw",t)}a(void 0)})},F.apply(this,arguments)}function q(){var t,e,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function c(n,r,o,c){var u=r&&r.prototype instanceof i?r:i,s=Object.create(u.prototype);return M(s,"_invoke",function(n,r,o){var c,i,u,s=0,l=o||[],f=!1,d={p:0,n:0,v:t,a:p,f:p.bind(t,4),d:function(e,n){return c=e,i=0,u=t,d.n=n,a}};function p(n,r){for(i=n,u=r,e=0;!f&&s&&!o&&e<l.length;e++){var o,c=l[e],p=d.p,v=c[2];n>3?(o=v===r)&&(u=c[(i=c[4])?5:(i=3,3)],c[4]=c[5]=t):c[0]<=p&&((o=n<2&&p<c[1])?(i=0,d.v=r,d.n=c[1]):p<v&&(o=n<3||c[0]>r||r>v)&&(c[4]=n,c[5]=r,d.n=v,i=0))}if(o||n>1)return a;throw f=!0,r}return function(o,l,v){if(s>1)throw TypeError("Generator is already running");for(f&&1===l&&p(l,v),i=l,u=v;(e=i<2?t:u)||!f;){c||(i?i<3?(i>1&&(d.n=-1),p(i,u)):d.n=u:d.v=u);try{if(s=2,c){if(i||(o="next"),e=c[o]){if(!(e=e.call(c,u)))throw TypeError("iterator result is not an object");if(!e.done)return e;u=e.value,i<2&&(i=0)}else 1===i&&(e=c.return)&&e.call(c),i<2&&(u=TypeError("The iterator does not provide a '"+o+"' method"),i=1);c=t}else if((e=(f=d.n<0)?u:n.call(r,d))!==a)break}catch(e){c=t,i=1,u=e}finally{s=1}}return{value:e,done:f}}}(n,o,c),!0),s}var a={};function i(){}function u(){}function s(){}e=Object.getPrototypeOf;var l=[][r]?e(e([][r]())):(M(e={},r,function(){return this}),e),f=s.prototype=i.prototype=Object.create(l);function d(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,s):(t.__proto__=s,M(t,o,"GeneratorFunction")),t.prototype=Object.create(f),t}return u.prototype=s,M(f,"constructor",s),M(s,"constructor",u),u.displayName="GeneratorFunction",M(s,o,"GeneratorFunction"),M(f),M(f,o,"Generator"),M(f,r,function(){return this}),M(f,"toString",function(){return"[object Generator]"}),(q=function(){return{w:c,m:d}})()}function M(t,e,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(t){o=0}M=function(t,e,n,r){function c(e,n){M(t,e,function(t){return this._invoke(e,n,t)})}e?o?o(t,e,{value:n,enumerable:!r,configurable:!r,writable:!r}):t[e]=n:(c("next",0),c("throw",1),c("return",2))},M(t,e,n,r)}function D(t,e,n,r,o,c,a){try{var i=t[c](a),u=i.value}catch(t){return void n(t)}i.done?e(u):Promise.resolve(u).then(r,o)}function z(t){return function(){var e=this,n=arguments;return new Promise(function(r,o){var c=t.apply(e,n);function a(t){D(c,r,o,a,i,"next",t)}function i(t){D(c,r,o,a,i,"throw",t)}a(void 0)})}}var B=document.getElementById("messages");function H(){B.scrollTop=B.scrollHeight}function R(){return U.apply(this,arguments)}function U(){return U=z(q().m(function t(){var e,n,r,o,c,a,i,u,s;return q().w(function(t){for(;;)switch(t.p=t.n){case 0:return u=function(){r.style.display="block",r.style.top="".concat(n.getBoundingClientRect().top-r.offsetHeight-10,"px"),r.style.left="".concat(n.getBoundingClientRect().left,"px"),r.style.width="".concat(n.offsetWidth,"px"),r.scrollTop=0},i=function(){return i=z(q().m(function t(){var c,a,i,s,l,f,d;return q().w(function(t){for(;;)switch(t.n){case 0:if(c=n.value.trim(),r.innerHTML="",r.classList.remove("yt-suggestions"),"/yt"!==c){t.n=1;break}return r.style.display="none",t.a(2);case 1:if(!c.startsWith("/yt ")){t.n=4;break}if(a=c.substring(4).trim()){t.n=2;break}return r.style.display="none",t.a(2);case 2:return t.n=3,o(a);case 3:return(i=t.v).length>0?(r.classList.add("yt-suggestions"),s=i.map(function(t){return'<div class="suggestion-item" data-command="/yt '.concat(t,'">').concat(t,"</div>")}).join(""),r.innerHTML=s,u()):r.style.display="none",t.a(2);case 4:c.startsWith("/")?(l=c.substring(1).toLowerCase(),f=e.filter(function(t){return t.toLowerCase().startsWith(l)}),f.length>0?(d=f.map(function(t){return'<div class="suggestion-item" data-command="/'.concat(t,'">/').concat(t,"</div>")}).join(""),r.innerHTML=d,u()):r.style.display="none"):r.style.display="none";case 5:return t.a(2)}},t)})),i.apply(this,arguments)},a=function(){return i.apply(this,arguments)},c=function(){return c=z(q().m(function t(e){var n,r,o;return q().w(function(t){for(;;)switch(t.p=t.n){case 0:return t.p=0,t.n=1,fetch("/api/youtube-suggestions?q=".concat(encodeURIComponent(e)));case 1:return n=t.v,t.n=2,n.json();case 2:return r=t.v,t.a(2,r.suggestions||[]);case 3:return t.p=3,o=t.v,console.error("Proxy fetch failed:",o),t.a(2,[])}},t,null,[[0,3]])})),c.apply(this,arguments)},o=function(t){return c.apply(this,arguments)},e=[],t.p=1,t.n=2,N();case 2:if(e=t.v,Array.isArray(e)){t.n=3;break}return console.error("API did not return an array:",e),t.a(2);case 3:t.n=5;break;case 4:return t.p=4,s=t.v,console.error("Failed to load commands:",s),t.a(2);case 5:n=document.getElementById("input"),(r=document.createElement("div")).className="command-suggestions",n.parentNode.appendChild(r),r.addEventListener("click",function(t){var e=t.target.closest(".suggestion-item");if(e){t.preventDefault();var o=e.getAttribute("data-command");n.value="".concat(o," "),r.style.display="none",n.focus()}}),n.addEventListener("input",function(){n.style.height="auto",n.value.split("\n").length<=3&&(n.style.height="".concat(Math.min(n.scrollHeight,72),"px")),a()}),n.addEventListener("keydown",function(t){if("Enter"!==t.key||t.shiftKey)"/"===t.key&&a();else if(t.preventDefault(),n.value.trim()){var e=n.selectionStart,r=n.value.substring(0,e),o=n.value.substring(e);n.value=r+"\n"+o,n.selectionStart=n.selectionEnd=e+1}}),document.addEventListener("click",function(t){n.contains(t.target)||r.contains(t.target)||(r.style.display="none")}),window.addEventListener("resize",function(){"block"===r.style.display&&a()});case 6:return t.a(2)}},t,null,[[1,4]])})),U.apply(this,arguments)}function Y(){var t,e,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function c(n,r,o,c){var u=r&&r.prototype instanceof i?r:i,s=Object.create(u.prototype);return W(s,"_invoke",function(n,r,o){var c,i,u,s=0,l=o||[],f=!1,d={p:0,n:0,v:t,a:p,f:p.bind(t,4),d:function(e,n){return c=e,i=0,u=t,d.n=n,a}};function p(n,r){for(i=n,u=r,e=0;!f&&s&&!o&&e<l.length;e++){var o,c=l[e],p=d.p,v=c[2];n>3?(o=v===r)&&(u=c[(i=c[4])?5:(i=3,3)],c[4]=c[5]=t):c[0]<=p&&((o=n<2&&p<c[1])?(i=0,d.v=r,d.n=c[1]):p<v&&(o=n<3||c[0]>r||r>v)&&(c[4]=n,c[5]=r,d.n=v,i=0))}if(o||n>1)return a;throw f=!0,r}return function(o,l,v){if(s>1)throw TypeError("Generator is already running");for(f&&1===l&&p(l,v),i=l,u=v;(e=i<2?t:u)||!f;){c||(i?i<3?(i>1&&(d.n=-1),p(i,u)):d.n=u:d.v=u);try{if(s=2,c){if(i||(o="next"),e=c[o]){if(!(e=e.call(c,u)))throw TypeError("iterator result is not an object");if(!e.done)return e;u=e.value,i<2&&(i=0)}else 1===i&&(e=c.return)&&e.call(c),i<2&&(u=TypeError("The iterator does not provide a '"+o+"' method"),i=1);c=t}else if((e=(f=d.n<0)?u:n.call(r,d))!==a)break}catch(e){c=t,i=1,u=e}finally{s=1}}return{value:e,done:f}}}(n,o,c),!0),s}var a={};function i(){}function u(){}function s(){}e=Object.getPrototypeOf;var l=[][r]?e(e([][r]())):(W(e={},r,function(){return this}),e),f=s.prototype=i.prototype=Object.create(l);function d(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,s):(t.__proto__=s,W(t,o,"GeneratorFunction")),t.prototype=Object.create(f),t}return u.prototype=s,W(f,"constructor",s),W(s,"constructor",u),u.displayName="GeneratorFunction",W(s,o,"GeneratorFunction"),W(f),W(f,o,"Generator"),W(f,r,function(){return this}),W(f,"toString",function(){return"[object Generator]"}),(Y=function(){return{w:c,m:d}})()}function W(t,e,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(t){o=0}W=function(t,e,n,r){function c(e,n){W(t,e,function(t){return this._invoke(e,n,t)})}e?o?o(t,e,{value:n,enumerable:!r,configurable:!r,writable:!r}):t[e]=n:(c("next",0),c("throw",1),c("return",2))},W(t,e,n,r)}function X(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(t){if("string"==typeof t)return J(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?J(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,o=function(){};return{s:o,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var c,a=!0,i=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return a=t.done,t},e:function(t){i=!0,c=t},f:function(){try{a||null==n.return||n.return()}finally{if(i)throw c}}}}function Q(t,e,n,r,o,c,a){try{var i=t[c](a),u=i.value}catch(t){return void n(t)}i.done?e(u):Promise.resolve(u).then(r,o)}function $(t){return function(){var e=this,n=arguments;return new Promise(function(r,o){var c=t.apply(e,n);function a(t){Q(c,r,o,a,i,"next",t)}function i(t){Q(c,r,o,a,i,"throw",t)}a(void 0)})}}function J(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}var V=document.getElementById("messages");function K(t){return t.replace(/(\b(https?:\/\/|www\.)[^\s]+|\b[a-z0-9.-]+\.[a-z]{2,}(\/[^\s]*)?)/gi,function(t){var e=t;return e.match(/^https?:\/\//i)||(e="http://"+e),'<a href="'.concat(e,'" target="_blank" class="chat-link">').concat(t,"</a>")})}function Z(t,e){return tt.apply(this,arguments)}function tt(){return tt=$(Y().m(function t(e,n){var r,o,c,a,i,u,s,l,f,d,p,v,y,m,h,g,b=arguments;return Y().w(function(t){for(;;)switch(t.p=t.n){case 0:r=b.length>2&&void 0!==b[2]?b[2]:null,(o=document.createElement("div")).className="message ".concat(n),V.prepend(o),"ai"===n&&((c=document.createElement("img")).src="https://i.imgur.com/aT9JqWg.png",c.className="ai-profile-img",o.appendChild(c)),(a=document.createElement("div")).className="text-content",o.appendChild(a),"user"===n&&r&&((i=document.createElement("img")).src=r,i.className="user-image",V.prepend(i)),u=K(e),(s=document.createElement("div")).innerHTML=u,l=X(s.childNodes),t.p=1,l.s();case 2:if((f=l.n()).done){t.n=12;break}if((d=f.value).nodeType!==Node.TEXT_NODE){t.n=10;break}p=X(d.textContent),t.p=3,p.s();case 4:if((v=p.n()).done){t.n=6;break}if(y=v.value,a.append(y),H(),"user"===n){t.n=5;break}return t.n=5,new Promise(function(t){return setTimeout(t,1+4*Math.random())});case 5:t.n=4;break;case 6:t.n=8;break;case 7:t.p=7,h=t.v,p.e(h);case 8:return t.p=8,p.f(),t.f(8);case 9:t.n=11;break;case 10:"A"===d.nodeName&&((m=document.createElement("a")).href=d.href,m.textContent=d.textContent,m.target="_blank",m.className="chat-link",a.appendChild(m));case 11:t.n=2;break;case 12:t.n=14;break;case 13:t.p=13,g=t.v,l.e(g);case 14:return t.p=14,l.f(),t.f(14);case 15:window.renderMathInElement&&renderMathInElement(a,{delimiters:[{left:"$",right:"$",display:!1},{left:"\\[",right:"\\]",display:!0}]});case 16:return t.a(2)}},t,null,[[3,7,8,9],[1,13,14,15]])})),tt.apply(this,arguments)}function et(t,e){return nt.apply(this,arguments)}function nt(){return(nt=$(Y().m(function t(e,n){var r,o,c;return Y().w(function(t){for(;;)switch(t.n){case 0:r=Array.isArray(e)?e:[e],o=r.length,(c=document.createElement("div")).className="photo-container",c.style.display="grid",1===o?(c.style.gridTemplateColumns="1fr",c.style.width="75%"):2===o?(c.style.gridTemplateColumns="repeat(2, 1fr)",c.style.gridTemplateRows="1fr",c.style.width="75%"):3===o?(c.style.gridTemplateColumns="repeat(2, 1fr)",c.style.gridTemplateRows="repeat(2, auto)",c.style.width="75%",c.classList.add("center-last")):4===o?(c.style.gridTemplateColumns="repeat(2, 1fr)",c.style.gridTemplateRows="repeat(2, auto)",c.style.width="75%"):5===o?(c.style.gridTemplateColumns="repeat(3, 1fr)",c.style.gridTemplateRows="repeat(2, auto)",c.style.width="100%",c.classList.add("center-last")):o>=6&&(c.style.gridTemplateColumns="repeat(3, 1fr)",c.style.gridTemplateRows="repeat(2, auto)",c.style.width="100%"),r.forEach(function(t,e){var n=document.createElement("img");n.src=t,n.alt="Photo",n.className="photo",n.style.borderRadius="0.75rem",n.style.objectFit="cover",n.style.cursor="pointer",3===o&&2===e&&(n.style.gridColumn="span 2",n.style.width="50%"),5===o&&e>=3&&(n.style.gridColumn=3===e?"2":"3",n.style.width="100%"),n.onclick=function(){var n=document.createElement("div");n.className="full-size-photo",n.style.position="fixed",n.style.top="0",n.style.left="0",n.style.width="100vw",n.style.height="100vh",n.style.background="rgba(0, 0, 0, 0.9)",n.style.display="flex",n.style.justifyContent="center",n.style.alignItems="center",n.style.zIndex="1000";var r=document.createElement("img");r.src=t,r.style.maxWidth="90%",r.style.maxHeight="90%",r.style.objectFit="contain",r.style.borderRadius="0.75rem",n.appendChild(r),document.body.appendChild(n),document.querySelector(".chat-container").style.display="none",history.pushState({view:"full-size-photo"},"","#photo-".concat(e)),n.onclick=function(){document.body.removeChild(n),document.querySelector(".chat-container").style.display="flex",history.back()},r.onerror=function(){console.error("Failed to load full-size image: ".concat(t)),document.body.removeChild(n),document.querySelector(".chat-container").style.display="flex",history.back(),Z("Failed to load image.","ai")}},n.onerror=function(){n.style.display="none",console.error("Failed to load image: ".concat(t))},c.appendChild(n),H()}),window.onpopstate=function(t){var e=document.querySelector(".full-size-photo");e&&(document.body.removeChild(e),document.querySelector(".chat-container").style.display="flex")},V.prepend(c),H();case 1:return t.a(2)}},t)}))).apply(this,arguments)}function rt(t,e){return ot.apply(this,arguments)}function ot(){return(ot=$(Y().m(function t(e,n){var r,o,c,a,i,u,s,l,f,d,p,v,y,m,h,g,b,w;return Y().w(function(t){for(;;)switch(t.p=t.n){case 0:if(w=function(){var t=c.duration-c.currentTime;f.textContent=b(t);var e=Math.floor(c.currentTime/g);v.getByteFrequencyData(y),l.forEach(function(t,n){var r=4+(y[2*n]||0)/255*20;t.style.height="".concat(r,"px"),t.style.backgroundColor=n<=e?"limegreen":"white"}),c.paused||c.ended||(h=requestAnimationFrame(w))},m=function(){if(!p){var t=(p=new(window.AudioContext||window.webkitAudioContext)).createMediaElementSource(c);(v=p.createAnalyser()).fftSize=32,y=new Uint8Array(v.frequencyBinCount),t.connect(v),v.connect(p.destination)}},"audio"===n){t.n=1;break}return t.a(2,Z("Invalid media type: ".concat(n,"."),"ai"));case 1:if(r=e,!e.startsWith("SUQzB")&&!/^[A-Za-z0-9+/=]+$/.test(e)){t.n=4;break}t.p=2,atob(e.substring(0,100)),r="data:audio/mpeg;base64,".concat(e),t.n=4;break;case 3:return t.p=3,t.v,t.a(2,Z("Failed to load audio: Invalid base64 data.","ai"));case 4:(o=document.createElement("div")).className="audio-container flex items-center gap-3 p-2 rounded-lg bg-gray-900/80 backdrop-blur-md w-fit shadow-lg",(c=document.createElement("audio")).src=r,c.preload="metadata",(a=document.createElement("button")).className="w-8 h-8 flex items-center justify-center text-white hover:scale-105 transition-all duration-200",u=function(){return a.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" class="w-6 h-6" fill="currentColor" viewBox="0 0 16 16"><path d="M5.5 3.5h2v9h-2v-9zm3 0h2v9h-2v-9z"/></svg>'},(i=function(){return a.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" class="w-6 h-6" fill="currentColor" viewBox="0 0 16 16"><path d="M6 3.5v9l6-4.5-6-4.5z"/></svg>'})(),(s=document.createElement("div")).className="flex gap-[2px] items-end h-6 flex-1",l=Array.from({length:15},function(){var t=document.createElement("span");return t.className="flex-1 bg-white rounded-sm h-[4px] transition-[background-color,height] duration-300 ease-in-out",s.appendChild(t),t}),(f=document.createElement("span")).className="text-white text-xs w-12 text-right font-mono",f.textContent="0:00",(d=document.createElement("a")).href=r,d.download="",d.className="text-white text-lg hover:text-green-400 transition-colors",d.textContent="⬇",b=function(t){var e=Math.floor(t/60),n=Math.floor(t%60).toString().padStart(2,"0");return"".concat(e,":").concat(n)},a.addEventListener("click",function(){c.paused?(m(),c.play(),p.resume()):c.pause()}),c.addEventListener("play",function(){u(),h=requestAnimationFrame(w)}),c.addEventListener("pause",function(){i(),cancelAnimationFrame(h)}),c.addEventListener("ended",function(){cancelAnimationFrame(h),l.forEach(function(t){t.style.backgroundColor="limegreen",t.style.height="4px"}),f.textContent=b(0),i()}),c.addEventListener("loadedmetadata",function(){f.textContent=b(c.duration),g=c.duration/15}),o.append(a,s,f,d,c),V.prepend(o),H();case 5:return t.a(2)}},t,null,[[2,3]])}))).apply(this,arguments)}function ct(t){var e=document.createElement("div");e.className="asss-container",e.style.cssText="text-align: center; margin: 10px 0;";var n=document.createElement("div");n.style.cssText="\n    color: gray;\n    font-size: 12px;\n    font-style: italic;\n  ",n.textContent=t;var r=document.createElement("span");r.textContent="",r.style.cssText="\n    margin-left: 3px;\n  ",n.appendChild(r),e.appendChild(n),V.prepend(e);var o=0,c=setInterval(function(){o=(o+1)%4,r.textContent=".".repeat(o)},500);return H(),function(){clearInterval(c),e.remove()}}function at(){var t=document.getElementById("assistant-popup"),e=document.getElementById("language-popup"),n=document.getElementById("plus-popup"),r=document.querySelector(".input-form"),o=document.getElementById("input"),c=document.querySelectorAll(".assistant-option:not(.language-option)"),a=document.querySelectorAll(".language-popup .language-option"),i=document.querySelector(".assistant-option.language-option"),u=document.getElementById("plus-button"),s=document.getElementById("open-assistant"),l="helpful",f="english",d=function(){!function(t){var e=document.createElement("div");e.className="asss-container",e.style.cssText="text-align: center; margin: 10px 0;";var n=document.createElement("div");n.textContent=t,n.style.cssText="\n    color: gray;\n    font-size: 12px;\n    font-style: italic;\n  ",e.appendChild(n),V.prepend(e),H()}("Assistant changed to ".concat(l.charAt(0).toUpperCase()+l.slice(1)," (").concat(f.charAt(0).toUpperCase()+f.slice(1),")")),H(),r.hasAttribute("data-keyboard")&&document.activeElement!==textarea&&o.focus()};return c.forEach(function(n){n.addEventListener("click",function(r){r.stopPropagation(),c.forEach(function(t){return t.classList.remove("current")}),n.classList.add("current"),l=n.dataset.assistant,t.classList.remove("show"),e.classList.remove("show"),d()})}),i.addEventListener("click",function(n){n.stopPropagation();var r=e.classList.toggle("show");t.classList.add("show"),function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"top",r=t.querySelector(".tooltip");r&&r.remove();var o=document.createElement("div");o.className="tooltip",o.textContent=e,o.dataset.position=n,t.appendChild(o);var c=function(e){e.preventDefault(),t.classList.add("active")},a=function(){return t.classList.remove("active")};["mousedown","touchstart"].forEach(function(e){return t.addEventListener(e,c)}),["mouseup","mouseleave","touchend","touchcancel"].forEach(function(e){return t.addEventListener(e,a)})}(document.getElementById("lang-tooltip-btn"),"You can change your\nassistant's language\nhere.",r?"top-left":"top-right")}),a.forEach(function(n){n.addEventListener("click",function(r){r.stopPropagation(),a.forEach(function(t){return t.classList.remove("current")}),n.classList.add("current"),f=n.dataset.language,e.classList.remove("show"),t.classList.add("show"),d()})}),u.addEventListener("click",function(r){r.preventDefault(),r.stopPropagation(),n.style.display="flex"===n.style.display?"none":"flex",t.classList.remove("show"),e.classList.remove("show")}),s.addEventListener("click",function(r){r.stopPropagation(),t.classList.toggle("show"),n.style.display="none",e.classList.remove("show")}),document.addEventListener("click",function(c){u.contains(c.target)||n.contains(c.target)||t.contains(c.target)||e.contains(c.target)?!t.contains(c.target)||e.contains(c.target)||i.contains(c.target)||e.classList.remove("show"):(t.classList.remove("show"),e.classList.remove("show"),n.style.display="none",r.hasAttribute("data-keyboard")&&document.activeElement!==textarea&&o.focus())}),document.addEventListener("imageUploaded",function(){n.style.display="none"}),{getCurrentAssistant:function(){return l},setCurrentAssistant:function(t){l=t,d()},getCurrentLanguage:function(){return f},setCurrentLanguage:function(t){f=t,d()}}}var it={upImg:null};function ut(){var t=document.getElementById("image-upload"),e=document.getElementById("thumbnail-wrapper"),n=document.getElementById("thumbnail-image");it.upImg=null,n.src="",e.style.display="none",t.value=""}function st(){var t=document.getElementById("image-upload"),e=document.getElementById("thumbnail-wrapper"),n=document.getElementById("thumbnail-image"),r=document.getElementById("clear-thumbnail");t.addEventListener("change",function(t){var r=t.target.files[0];if(r&&r.type.startsWith("image/")){var o=new FileReader;o.onload=function(){it.upImg=o.result,n.src=o.result,e.style.display="flex";var t=new CustomEvent("imageUploaded",{detail:{src:o.result}});document.dispatchEvent(t)},o.readAsDataURL(r)}}),r.addEventListener("click",ut)}function lt(){return localStorage.getItem("userId")||function(){for(var t="",e=0;e<6;e++)t+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(Math.floor(62*Math.random()));return localStorage.setItem("userId",t),t}()}function ft(){return localStorage.getItem("username")||"Guest"}function dt(){var t,e,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function c(n,r,o,c){var u=r&&r.prototype instanceof i?r:i,s=Object.create(u.prototype);return pt(s,"_invoke",function(n,r,o){var c,i,u,s=0,l=o||[],f=!1,d={p:0,n:0,v:t,a:p,f:p.bind(t,4),d:function(e,n){return c=e,i=0,u=t,d.n=n,a}};function p(n,r){for(i=n,u=r,e=0;!f&&s&&!o&&e<l.length;e++){var o,c=l[e],p=d.p,v=c[2];n>3?(o=v===r)&&(u=c[(i=c[4])?5:(i=3,3)],c[4]=c[5]=t):c[0]<=p&&((o=n<2&&p<c[1])?(i=0,d.v=r,d.n=c[1]):p<v&&(o=n<3||c[0]>r||r>v)&&(c[4]=n,c[5]=r,d.n=v,i=0))}if(o||n>1)return a;throw f=!0,r}return function(o,l,v){if(s>1)throw TypeError("Generator is already running");for(f&&1===l&&p(l,v),i=l,u=v;(e=i<2?t:u)||!f;){c||(i?i<3?(i>1&&(d.n=-1),p(i,u)):d.n=u:d.v=u);try{if(s=2,c){if(i||(o="next"),e=c[o]){if(!(e=e.call(c,u)))throw TypeError("iterator result is not an object");if(!e.done)return e;u=e.value,i<2&&(i=0)}else 1===i&&(e=c.return)&&e.call(c),i<2&&(u=TypeError("The iterator does not provide a '"+o+"' method"),i=1);c=t}else if((e=(f=d.n<0)?u:n.call(r,d))!==a)break}catch(e){c=t,i=1,u=e}finally{s=1}}return{value:e,done:f}}}(n,o,c),!0),s}var a={};function i(){}function u(){}function s(){}e=Object.getPrototypeOf;var l=[][r]?e(e([][r]())):(pt(e={},r,function(){return this}),e),f=s.prototype=i.prototype=Object.create(l);function d(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,s):(t.__proto__=s,pt(t,o,"GeneratorFunction")),t.prototype=Object.create(f),t}return u.prototype=s,pt(f,"constructor",s),pt(s,"constructor",u),u.displayName="GeneratorFunction",pt(s,o,"GeneratorFunction"),pt(f),pt(f,o,"Generator"),pt(f,r,function(){return this}),pt(f,"toString",function(){return"[object Generator]"}),(dt=function(){return{w:c,m:d}})()}function pt(t,e,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(t){o=0}pt=function(t,e,n,r){function c(e,n){pt(t,e,function(t){return this._invoke(e,n,t)})}e?o?o(t,e,{value:n,enumerable:!r,configurable:!r,writable:!r}):t[e]=n:(c("next",0),c("throw",1),c("return",2))},pt(t,e,n,r)}function vt(t,e,n,r,o,c,a){try{var i=t[c](a),u=i.value}catch(t){return void n(t)}i.done?e(u):Promise.resolve(u).then(r,o)}function yt(t){return function(){var e=this,n=arguments;return new Promise(function(r,o){var c=t.apply(e,n);function a(t){vt(c,r,o,a,i,"next",t)}function i(t){vt(c,r,o,a,i,"throw",t)}a(void 0)})}}var mt=n(253);window.addEventListener("load",yt(dt().m(function t(){var e,n,r,o,c,a,i,u,s,l,f,d,y,m,h,b,w,j,O,E;return dt().w(function(t){for(;;)switch(t.n){case 0:return E=function(){m(),j();var t=h();t&&!O&&H(),O=t},j=function(){var t=e.scrollHeight-e.scrollTop-e.clientHeight<5;h()&&t?(document.addEventListener("touchstart",function(t){return b(t.target)&&(t.target._lastTouchY=t.touches[0].clientY)},{passive:!0}),document.addEventListener("touchmove",w,{passive:!1})):document.removeEventListener("touchmove",w)},w=function(t){for(var e=t.target;e&&e!==document.body;e=e.parentElement)if(b(e)){var n,r=t.touches[0].clientY,o=r-(null!==(n=e._lastTouchY)&&void 0!==n?n:r);return e._lastTouchY=r,void(e.scrollTop+e.clientHeight>=e.scrollHeight&&o<0&&t.preventDefault())}t.preventDefault()},d=function(){r.style.height="auto";var t=Math.min(r.scrollHeight,f);r.style.height="".concat(t,"px"),r.style.overflowY=r.scrollHeight>f?"auto":"hidden"},R(),t.n=1,g();case 1:st(),e=document.getElementById("messages"),n=document.getElementById("chat-form"),r=document.getElementById("input"),o=n.querySelector('button[type="submit"]'),c=lt(),a=ft(),i=at(),u={},mt.keys().forEach(function(t){var e,n=mt(t).default||mt(t);null!=n&&null!==(e=n.config)&&void 0!==e&&e.commandName&&"function"==typeof n.jnAi&&(u[n.config.commandName]=n.jnAi)}),(s=document.createElement("div")).className="command-suggestions",r.parentNode.appendChild(s),l=parseFloat(getComputedStyle(r).lineHeight),isNaN(l)&&(l=20),f=8*l,r.addEventListener("input",function(){d(),o.classList.toggle("active",r.value.trim().length>0)}),d(),n.addEventListener("submit",function(){var t=yt(dt().m(function t(f){var y;return dt().w(function(t){for(;;)switch(t.n){case 0:if(f.preventDefault(),y=r.value.trim()){t.n=1;break}return t.a(2);case 1:return r.value="",r.style.height="".concat(l,"px"),r.style.overflowY="hidden",d(),o.classList.remove("active"),t.n=2,_({text:y,form:n,input:r,addMessage:Z,addMedia:rt,addPhoto:et,messagesDiv:e,scrollToBottom:H,assistant:i,commandss:u,userId:c,users:a,fuck:v,aaа:p,commandSuggestions:s,upImg:it,removeThumbnail:ut,loadingMsg:ct});case 2:return t.a(2)}},t)}));return function(e){return t.apply(this,arguments)}}()),y=window.visualViewport.height,m=function(){return document.documentElement.style.setProperty("--vh","".concat(.01*window.visualViewport.height,"px"))},h=function(){return window.visualViewport.height<y-100},b=function(t){return t&&["auto","scroll"].includes(getComputedStyle(t).overflowY)&&t.scrollHeight>t.clientHeight},O=!1,window.visualViewport.addEventListener("resize",E),window.visualViewport.addEventListener("scroll",j),m(),j();case 2:return t.a(2)}},t)})))})()})();